{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","src/index.js","src/core/index.js","src/plugins/index.js","src/core/Core.js","src/plugins/Plugin.js","src/plugins/Dummy.js","src/plugins/DragDrop.js","src/plugins/Formtag.js","src/plugins/ProgressBar.js","src/plugins/GoogleDrive.js","src/plugins/Spinner.js","src/plugins/Multipart.js","src/plugins/Tus10.js","src/plugins/Present.js","src/plugins/TransloaditBasic.js","src/plugins/Modal/index.js","node_modules/browserify/node_modules/events/events.js","src/locales/en_US.js","src/core/Utils.js","src/core/Translator.js","src/core/UppySocket.js","src/plugins/Modal/Dashboard.js","src/plugins/Modal/icons.js","node_modules/yo-yo/index.js","node_modules/drag-drop/index.js","node_modules/whatwg-fetch/fetch.js","node_modules/pretty-bytes/index.js","node_modules/es6-promise/dist/es6-promise.js","node_modules/tus-js-client/lib.es5/index.js","src/plugins/Modal/FileItem.js","node_modules/yo-yo/update-events.js","node_modules/tus-js-client/lib.es5/upload.js","node_modules/browserify/node_modules/process/browser.js","node_modules/yo-yo/node_modules/bel/index.js","node_modules/drag-drop/node_modules/flatten/index.js","node_modules/drag-drop/node_modules/run-parallel/index.js","node_modules/yo-yo/node_modules/morphdom/lib/index.js","node_modules/pretty-bytes/node_modules/number-is-nan/index.js","node_modules/tus-js-client/lib.es5/fingerprint.js","node_modules/yo-yo/node_modules/bel/node_modules/global/document.js","node_modules/yo-yo/node_modules/bel/node_modules/hyperx/index.js","node_modules/yo-yo/node_modules/bel/node_modules/on-load/index.js","node_modules/tus-js-client/node_modules/extend/index.js","node_modules/yo-yo/node_modules/bel/node_modules/hyperx/node_modules/hyperscript-attribute-to-property/index.js","node_modules/yo-yo/node_modules/bel/node_modules/global/window.js"],"names":["_index","require","_index3","locales","Core","plugins","_Core","_Plugin","_Modal","_Dummy","_DragDrop","_Formtag","_GoogleDrive","_ProgressBar","_Spinner","_Tus","_Multipart","_Present","_TransloaditBasic","module","exports","Plugin","_Plugin2","Dummy","_Dummy2","ProgressBar","_ProgressBar2","Spinner","_Spinner2","Present","_Present2","DragDrop","_DragDrop2","GoogleDrive","_GoogleDrive2","Formtag","_Formtag2","Tus10","_Tus2","Multipart","_Multipart2","TransloaditBasic","_TransloaditBasic2","Modal","_Modal2","_Utils","_Translator","_prettyBytes","_yoYo","_events","_UppySocket","opts","_classCallCheck","this","defaultOptions","autoProceed","debug","_extends","types","type","translator","_Translator2","i18n","translate","bind","initSocket","emitter","_events2","EventEmitter","state","files","global","UppyState","uppyLog","UppyAddFile","addFile","updateAll","_this","Object","keys","forEach","pluginType","plugin","update","setState","newState","log","getState","addMeta","meta","fileID","updatedFiles","file","_this2","fileType","split","fileTypeGeneral","fileTypeSpecific","_Utils2","generateFileID","name","source","id","general","specific","data","progress","totalSize","size","_prettyBytes2","uploadedSize","isRemote","remote","readImage","imgEl","newImageWidth","newImageHeight","getProportionalImageHeight","resizedImgSrc","resizeImage","previewEl","_yoYo2","_templateObject","emit","actions","_this3","on","percentage","bytesUploaded","bytesTotal","toFixed","Math","round","inProgress","map","progressMax","length","progressAll","totalProgress","use","pluginName","Error","existsPluginAlready","getPlugin","msg","push","foundPlugin","iteratePlugins","method","_this4","console","dir","runType","methods","flatten","Promise","all","error","run","_this5","acquirer","install","socket","_UppySocket2","core","mount","focus","el","newEl","render","target","callerPluginName","document","querySelector","appendChild","Target","targetPluginName","targetPlugin","selectorTarget","addTarget","_possibleConstructorReturn","call","title","strange","bla","_templateObject2","_templateObject3","firstInput","setTimeout","_dragDrop","icon","isDragDropSupported","checkDragDropSupport","handleDrop","handleInputChange","div","createElement","window","ev","toArray","onSelect","input","click","next","preventDefault","stopPropagation","onSubmit","_dragDrop2","replaceTargetContent","multipleFiles","Google","getFolder","handleClick","logout","renderBrowserItem","filterItems","filterQuery","renderAuth","renderBrowser","sortByTitle","sortByDate","googleDrive","authenticated","folders","directory","active","filterInput","checkAuthentication","then","updateState","fetch","host","credentials","headers","Accept","Content-Type","res","status","json","statusText","response","isAuthenticated","err","arguments","undefined","items","item","mimeType","handleError","getNextFolder","index","findIndex","slice","concat","extend","tagFile","getFileType","url","body","fileId","_this6","_this7","location","href","ok","fileTypes","application/vnd.google-apps.folder","application/vnd.google-apps.document","application/vnd.google-apps.spreadsheet","application/vnd.google-apps.presentation","image/jpeg","image/png","fileExtension","toUpperCase","e","value","filter","folder","toLowerCase","indexOf","sorting","sortedFiles","sort","fileA","fileB","localeCompare","sortedFolders","folderA","folderB","a","Date","modifiedByMeDate","b","btoa","JSON","stringify","redirect","link","_this8","previewElem","isFileSelected","breadcrumbs","_templateObject4","iconLink","thumbnailLink","_templateObject5","_templateObject6","_templateObject7","isAFileSelected","isFolder","_templateObject8","renderError","_templateObject9","setProgress","spinnerEl","classList","add","remove","initSpinner","spinnerContainer","innerHTML","initEvents","constructor","caller","getTarget","fieldName","responseUrlFieldName","bundle","upload","current","total","_Promise","resolve","reject","formPost","FormData","append","xhr","XMLHttpRequest","addEventListener","lengthComputable","loaded","uploader","resp","parse","uploadURL","open","endpoint","send","selectForUpload","filesForUpload","uploaders","i","parseInt","result","_tusJsClient","_tusJsClient2","Upload","resume","onError","onProgress","onSuccess","abort","start","uploadRemote","acquiredBy","uploadFiles","uploadedCount","hidePresenter","presenter","showPresenter","smart_count","results","targetEl","modal","wait","_Dashboard","_icons","defaultTabIcon","panelSelectorPrefix","hideModal","showModal","hideAllPanels","showPanel","callerPluginId","callerPluginIcon","callerPluginType","isHidden","targets","newModalTargets","newTargets","showModalTrigger","trigger","event","keyCode","contains","handlePaste","Array","from","clipboardData","shift","fileBlob","getAsFile","bus","modalTargets","acquirers","progressindicators","isTouchDevice","closeIcon","localIcon","_Dashboard2","_maxListeners","isFunction","arg","isNumber","isObject","isUndefined","prototype","defaultMaxListeners","setMaxListeners","n","isNaN","TypeError","er","handler","len","args","listeners","context","apply","addListener","listener","m","newListener","warned","trace","once","g","removeListener","fired","list","position","splice","removeAllListeners","key","ret","listenerCount","evlistener","en_US","strings","chooseFile","youHaveChosen","orDragDrop","filesChosen","0","1","filesUploaded","selectToUpload","closeModal","pluralize","Uppy","promiseWaterfall","resolvedPromise","tasks","finalTaskPromise","reduce","prevTaskPromise","task","arr","navigator","maxTouchPoints","qsa","selector","querySelectorAll","groupBy","array","groupingFn","xs","get","set","Map","every","predicateFn","fileName","replace","now","_len","objs","_key","assign","getFnName","fn","f","s","toString","match","imgObject","cb","reader","FileReader","imgSrcBase64","img","Image","onload","src","readAsDataURL","newWidth","aspect","width","height","newHeight","canvas","ctx","getContext","drawImage","toDataURL","Translator","interpolate","phrase","options","String","dollarRegex","dollarBillsYall","hasOwnProperty","replacement","RegExp","plural","UppySocket","queued","isOpen","WebSocket","onopen","first","action","payload","onclose","_handleMessage","onmessage","message","Dashboard","selectedFiles","totalFileCount","selectedFileCount","isSomethingSelected","dashboardBgIcon","_FileItem2","uploadIcon","_FileItem","backIcon","pluginIcon","checkIcon","removeIcon","fileIcon","_templateObject10","bel","morphdom","defaultEvents","fromNode","toNode","copier","t","events","nodeName","getAttribute","onBeforeMorphEl","dragDrop","elem","onDragOver","dataTransfer","kind","clearTimeout","timeout","dropEffect","onDragLeave","removeDragClass","onDrop","pos","x","clientX","y","clientY","parallel","processEntry","webkitGetAsEntry","fullPath","stopEvent","removeEventListener","entry","readEntries","entries_","entries","doneEntries","isFile","isDirectory","createReader","self","normalizeName","test","normalizeValue","iteratorFor","iterator","done","support","iterable","Symbol","Headers","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","onerror","readBlobAsArrayBuffer","blob","readAsArrayBuffer","readBlobAsText","readAsText","Body","_initBody","_bodyInit","_bodyText","Blob","isPrototypeOf","_bodyBlob","formData","_bodyFormData","searchParams","URLSearchParams","arrayBuffer","ArrayBuffer","rejected","text","decode","normalizeMethod","upcased","Request","mode","referrer","form","trim","bytes","join","decodeURIComponent","head","pairs","getAllResponseHeaders","header","Response","bodyInit","values","getAll","has","callback","thisArg","clone","redirectStatuses","RangeError","init","responseURL","getResponseHeader","request","responseText","ontimeout","withCredentials","responseType","setRequestHeader","polyfill","numberIsNan","num","exponent","unit","neg","units","min","floor","Number","pow","lib$es6$promise$utils$$objectOrFunction","lib$es6$promise$utils$$isFunction","lib$es6$promise$asap$$setScheduler","scheduleFn","lib$es6$promise$asap$$customSchedulerFn","lib$es6$promise$asap$$setAsap","asapFn","lib$es6$promise$asap$$asap","lib$es6$promise$asap$$useNextTick","process","nextTick","lib$es6$promise$asap$$flush","lib$es6$promise$asap$$useVertxTimer","lib$es6$promise$asap$$vertxNext","lib$es6$promise$asap$$useMutationObserver","iterations","observer","lib$es6$promise$asap$$BrowserMutationObserver","node","createTextNode","observe","characterData","lib$es6$promise$asap$$useMessageChannel","channel","MessageChannel","port1","port2","postMessage","lib$es6$promise$asap$$useSetTimeout","lib$es6$promise$asap$$len","lib$es6$promise$asap$$queue","lib$es6$promise$asap$$attemptVertx","r","vertx","runOnLoop","runOnContext","lib$es6$promise$then$$then","onFulfillment","onRejection","parent","child","lib$es6$promise$$internal$$noop","lib$es6$promise$$internal$$PROMISE_ID","lib$es6$promise$$internal$$makePromise","_state","lib$es6$promise$$internal$$invokeCallback","_result","lib$es6$promise$$internal$$subscribe","lib$es6$promise$promise$resolve$$resolve","object","Constructor","promise","lib$es6$promise$$internal$$resolve","lib$es6$promise$$internal$$selfFulfillment","lib$es6$promise$$internal$$cannotReturnOwn","lib$es6$promise$$internal$$getThen","lib$es6$promise$$internal$$GET_THEN_ERROR","lib$es6$promise$$internal$$tryThen","fulfillmentHandler","rejectionHandler","lib$es6$promise$$internal$$handleForeignThenable","thenable","sealed","lib$es6$promise$$internal$$fulfill","reason","lib$es6$promise$$internal$$reject","_label","lib$es6$promise$$internal$$handleOwnThenable","lib$es6$promise$$internal$$FULFILLED","lib$es6$promise$$internal$$REJECTED","lib$es6$promise$$internal$$handleMaybeThenable","maybeThenable","lib$es6$promise$then$$default","lib$es6$promise$promise$resolve$$default","lib$es6$promise$$internal$$publishRejection","_onerror","lib$es6$promise$$internal$$publish","lib$es6$promise$$internal$$PENDING","_subscribers","subscribers","settled","detail","lib$es6$promise$$internal$$ErrorObject","lib$es6$promise$$internal$$tryCatch","lib$es6$promise$$internal$$TRY_CATCH_ERROR","succeeded","failed","hasCallback","lib$es6$promise$$internal$$initializePromise","resolver","lib$es6$promise$$internal$$nextId","lib$es6$promise$$internal$$id","lib$es6$promise$promise$all$$all","lib$es6$promise$enumerator$$default","lib$es6$promise$promise$race$$race","lib$es6$promise$utils$$isArray","lib$es6$promise$promise$reject$$reject","lib$es6$promise$promise$$needsResolver","lib$es6$promise$promise$$needsNew","lib$es6$promise$promise$$Promise","lib$es6$promise$enumerator$$Enumerator","_instanceConstructor","_input","_remaining","_enumerate","lib$es6$promise$enumerator$$validationError","lib$es6$promise$polyfill$$polyfill","local","Function","P","cast","lib$es6$promise$promise$$default","lib$es6$promise$utils$$_isArray","isArray","lib$es6$promise$asap$$scheduleFlush","lib$es6$promise$asap$$browserWindow","lib$es6$promise$asap$$browserGlobal","MutationObserver","WebKitMutationObserver","lib$es6$promise$asap$$isNode","lib$es6$promise$asap$$isWorker","Uint8ClampedArray","importScripts","random","substring","lib$es6$promise$promise$all$$default","lib$es6$promise$promise$race$$default","lib$es6$promise$promise$reject$$default","race","_setScheduler","_setAsap","_asap","catch","_eachEntry","c","_settledAt","_willSettleAt","enumerator","lib$es6$promise$polyfill$$default","lib$es6$promise$umd$$ES6Promise","define","_interopRequire","obj","__esModule","localStorage","isSupported","fileItem","isUploaded","uploadInProgress","encodeMetadata","metadata","encoded","unescape","encodeURIComponent","_createClass","defineProperties","props","prop","configurable","writable","protoProps","staticProps","instance","fingerprint","onChunkComplete","chunkSize","Infinity","_xhr","_fingerprint","_offset","_aborted","_emitError","_resumeUpload","resumedUrl","getItem","_createUpload","_emitXhrError","originalRequest","_emitSuccess","_emitProgress","bytesSent","_emitChunkComplete","bytesAccepted","_setupXHR","_name","setItem","_startUpload","removeItem","offset","onprogress","end","cleanUpNextTick","draining","currentQueue","queue","queueIndex","drainQueue","cachedSetTimeout","cachedClearTimeout","Item","fun","noop","browser","env","argv","version","versions","off","binding","cwd","chdir","umask","belCreateElement","tag","children","childs","lastChild","nodeValue","nodeType","SVG_TAGS","namespace","SVGNS","ns","createElementNS","onunload","load","unload","p","val","BOOL_PROPS","setAttributeNS","setAttribute","hyperx","autofocus","checked","defaultchecked","disabled","formnovalidate","indeterminate","readonly","required","selected","willvalidate","depth","_flatten","d","acc","isSync","each","pending","empty","o","k","toElement","str","range","createRange","selectNode","fragment","createContextualFragment","childNodes","namespaceURI","XHTML","morphAttrs","attr","attrName","attrNamespaceURI","attrValue","fromValue","attrs","attributes","localName","getAttributeNS","specified","hasAttributeNS","removeAttributeNS","removeAttribute","moveChildren","fromEl","toEl","curChild","firstChild","nextChild","nextSibling","defaultGetNodeKey","removeNodeHelper","nestedInSavedEl","getNodeKey","savedEls","onNodeDiscarded","ELEMENT_NODE","walkDiscardedChildNodes","removeNode","parentNode","alreadyVisited","onBeforeNodeDiscarded","removeChild","morphEl","childrenOnly","toElKey","onBeforeElUpdated","onElUpdated","onBeforeElChildrenUpdated","curToNodeId","fromNextSibling","toNextSibling","savedEl","unmatchedEl","curToNodeChild","curFromNodeChild","outer","curFromNodeId","unmatchedEls","replaceChild","curFromNodeType","isCompatible","compareNodeNames","TEXT_NODE","COMMENT_NODE","onBeforeNodeAdded","onNodeAdded","movedEls","specialElHandler","specialElHandlers","toNodeHtml","onBeforeMorphElChildren","morphedNode","morphedNodeType","toNodeType","handleMovedEl","handleMovedElsLoop","movedElsTemp","savedElId","testEl","hasAttribute","getAttributeNode","OPTION","INPUT","TEXTAREA","newValue","lastModified","topLevel","minDoc","doccy","quot","ATTR_VALUE_SQ","ATTR_VALUE_DQ","hasOwn","selfClosing","closeRE","attrToProp","VAR","TEXT","OPEN","CLOSE","ATTR","ATTR_KEY","ATTR_KEY_W","ATTR_VALUE_W","ATTR_VALUE","ATTR_EQ","ATTR_BREAK","h","strfn","charAt","reg","arglen","parts","xstate","tree","stack","cur","ix","pop","copyKey","j","turnon","watch","turnoff","eachAttr","mutation","KEY_ATTR","sameOrigin","oldValue","eachMutation","nodes","onloadid","create","KEY_ID","INDEX","mutations","attributeName","removedNodes","addedNodes","childList","subtree","attributeOldValue","attributeFilter","toStr","isPlainObject","hasOwnConstructor","hasIsPrototypeOf","copy","copyIsArray","deep","attributeToProperty","tagName","transform","class","for","http-equiv"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Core from './core/index'\nimport plugins from './plugins/index'\n\nconst locales = {}\n\nexport {\n  Core,\n  plugins,\n  locales\n}\n","import Core from './Core'\nexport default Core\n","// Parent\nimport Plugin from './Plugin'\n\n// Orchestrators\nimport Modal from './Modal'\n\n// Acquirers\nimport Dummy from './Dummy'\nimport DragDrop from './DragDrop'\nimport Formtag from './Formtag'\nimport GoogleDrive from './GoogleDrive'\n\n// Progressindicators\nimport ProgressBar from './ProgressBar'\nimport Spinner from './Spinner'\n\n// Uploaders\nimport Tus10 from './Tus10'\nimport Multipart from './Multipart'\n\n// Presenters\nimport Present from './Present'\n\n// Presetters\nimport TransloaditBasic from './TransloaditBasic'\n\nmodule.exports = {\n  Plugin,\n  Dummy,\n  ProgressBar,\n  Spinner,\n  Present,\n  DragDrop,\n  GoogleDrive,\n  Formtag,\n  Tus10,\n  Multipart,\n  TransloaditBasic,\n  Modal\n}\n","import Utils from '../core/Utils'\nimport Translator from '../core/Translator'\nimport prettyBytes from 'pretty-bytes'\nimport yo from 'yo-yo'\nimport ee from 'events'\nimport UppySocket from './UppySocket'\n\n/**\n * Main Uppy core\n *\n * @param {object} opts general options, like locales, to show modal or not to show\n */\nexport default class Core {\n  constructor (opts) {\n    // set default options\n    const defaultOptions = {\n      // load English as the default locales\n      locales: require('../locales/en_US.js'),\n      autoProceed: true,\n      debug: false\n    }\n\n    // Merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    // Dictates in what order different plugin types are ran:\n    this.types = [ 'presetter', 'orchestrator', 'progressindicator', 'acquirer', 'uploader', 'presenter' ]\n\n    this.type = 'core'\n\n    // Container for different types of plugins\n    this.plugins = {}\n\n    this.translator = new Translator({locales: this.opts.locales})\n    this.i18n = this.translator.translate.bind(this.translator)\n    this.initSocket = this.initSocket.bind(this)\n\n    this.emitter = new ee.EventEmitter()\n\n    this.state = {\n      files: {}\n    }\n\n    if (this.opts.debug) {\n      // for debugging and testing\n      global.UppyState = this.state\n      global.uppyLog = ''\n      global.UppyAddFile = this.addFile.bind(this)\n    }\n  }\n\n  /**\n   * Iterate on all plugins and run `update` on them. Called each time when state changes\n   *\n   */\n  updateAll () {\n    Object.keys(this.plugins).forEach((pluginType) => {\n      this.plugins[pluginType].forEach((plugin) => {\n        plugin.update()\n      })\n    })\n  }\n\n  /**\n   * Updates state\n   *\n   * @param {newState} object\n   */\n  setState (newState) {\n    this.log('Setting state to: ')\n    this.log(newState)\n    this.state = Object.assign({}, this.state, newState)\n    this.updateAll()\n  }\n\n  /**\n   * Gets current state, making sure to make a copy of the state object and pass that,\n   * instead of an actual reference to `this.state`\n   *\n   */\n  getState () {\n    return this.state\n  }\n\n  addMeta (meta, fileID) {\n    if (typeof fileID === 'undefined') {\n      const updatedFiles = Object.assign({}, this.state.files)\n      for (let file in updatedFiles) {\n        updatedFiles[file].meta = meta\n      }\n      this.setState({files: updatedFiles})\n    }\n  }\n\n  addFile (file) {\n    const updatedFiles = Object.assign({}, this.state.files)\n\n    const fileType = file.type.split('/')\n    const fileTypeGeneral = fileType[0]\n    const fileTypeSpecific = fileType[1]\n    const fileID = Utils.generateFileID(file.name)\n\n    updatedFiles[fileID] = {\n      source: file.source || '',\n      id: fileID,\n      name: file.name,\n      type: {\n        general: fileTypeGeneral,\n        specific: fileTypeSpecific\n      },\n      data: file.data,\n      progress: 0,\n      totalSize: file.data.size ? prettyBytes(file.data.size) : '?',\n      uploadedSize: 0,\n      isRemote: file.isRemote || false,\n      remote: file.remote\n    }\n\n    this.setState({files: updatedFiles})\n\n    if (fileTypeGeneral === 'image') {\n      // this.addImgPreviewToFile(updatedFiles[fileID])\n      Utils.readImage(updatedFiles[fileID].data, (imgEl) => {\n        const newImageWidth = 200\n        const newImageHeight = Utils.getProportionalImageHeight(imgEl, newImageWidth)\n        const resizedImgSrc = Utils.resizeImage(imgEl, newImageWidth, newImageHeight)\n\n        const updatedFiles = Object.assign({}, this.state.files)\n        updatedFiles[fileID].previewEl = yo`<img alt=\"${file.name}\" src=\"${resizedImgSrc}\">`\n        this.setState({files: updatedFiles})\n      })\n    }\n\n    if (this.opts.autoProceed) {\n      this.emitter.emit('next')\n    }\n  }\n\n  /**\n   * Registers listeners for all global actions, like:\n   * `file-add`, `file-remove`, `upload-progress`, `reset`\n   *\n   */\n  actions () {\n    this.emitter.on('file-add', (data) => {\n      this.addFile(data)\n    })\n\n    // `remove-file` removes a file from `state.files`, for example when\n    // a user decides not to upload particular file and clicks a button to remove it\n    this.emitter.on('file-remove', (fileID) => {\n      const updatedFiles = Object.assign({}, this.state.files)\n      delete updatedFiles[fileID]\n      this.setState({files: updatedFiles})\n    })\n\n    this.emitter.on('upload-progress', (data) => {\n      let percentage = (data.bytesUploaded / data.bytesTotal * 100).toFixed(2)\n      percentage = Math.round(percentage)\n\n      const updatedFiles = Object.assign({}, this.state.files)\n      updatedFiles[data.id].progress = percentage\n      updatedFiles[data.id].uploadedSize = data.bytesUploaded ? prettyBytes(data.bytesUploaded) : '?'\n\n      const inProgress = Object.keys(updatedFiles).map((file) => {\n        return file.progress !== 0\n      })\n\n      // calculate total progress, using the number of files currently uploading,\n      // multiplied by 100 and the summ of individual progress of each file\n      const progressMax = Object.keys(inProgress).length * 100\n      let progressAll = 0\n      Object.keys(updatedFiles).forEach((file) => {\n        progressAll = progressAll + updatedFiles[file].progress\n      })\n\n      const totalProgress = progressAll * 100 / progressMax\n\n      this.setState({\n        totalProgress: totalProgress,\n        files: updatedFiles\n      })\n    })\n\n    // `upload-success` adds successfully uploaded file to `state.uploadedFiles`\n    // and fires `remove-file` to remove it from `state.files`\n    this.emitter.on('upload-success', (file) => {\n      const updatedFiles = Object.assign({}, this.state.files)\n      updatedFiles[file.id] = file\n      this.setState({files: updatedFiles})\n      // this.log(this.state.uploadedFiles)\n      // this.emitter.emit('file-remove', file.id)\n    })\n  }\n\n/**\n * Registers a plugin with Core\n *\n * @param {Class} Plugin object\n * @param {Object} options object that will be passed to Plugin later\n * @return {Object} self for chaining\n */\n  use (Plugin, opts) {\n    // Instantiate\n    const plugin = new Plugin(this, opts)\n    const pluginName = plugin.id\n    this.plugins[plugin.type] = this.plugins[plugin.type] || []\n\n    if (!pluginName) {\n      throw new Error('Your plugin must have a name')\n    }\n\n    if (!plugin.type) {\n      throw new Error('Your plugin must have a type')\n    }\n\n    let existsPluginAlready = this.getPlugin(pluginName)\n    if (existsPluginAlready) {\n      let msg = `Already found a plugin named '${existsPluginAlready.name}'.\n        Tried to use: '${pluginName}'.\n        Uppy is currently limited to running one of every plugin.\n        Share your use case with us over at\n        https://github.com/transloadit/uppy/issues/\n        if you want us to reconsider.`\n      throw new Error(msg)\n    }\n\n    this.plugins[plugin.type].push(plugin)\n\n    return this\n  }\n\n/**\n * Find one Plugin by name\n *\n * @param string name description\n */\n  getPlugin (name) {\n    let foundPlugin = false\n    this.iteratePlugins((plugin) => {\n      const pluginName = plugin.id\n      if (pluginName === name) {\n        foundPlugin = plugin\n        return false\n      }\n    })\n    return foundPlugin\n  }\n\n/**\n * Iterate through all `use`d plugins\n *\n * @param function method description\n */\n  iteratePlugins (method) {\n    Object.keys(this.plugins).forEach((pluginType) => {\n      this.plugins[pluginType].forEach(method)\n    })\n  }\n\n/**\n * Logs stuff to console, only if `debug` is set to true. Silent in production.\n *\n * @return {String|Object} to log\n */\n  log (msg) {\n    if (!this.opts.debug) {\n      return\n    }\n    if (msg === `${msg}`) {\n      console.log(`LOG: ${msg}`)\n    } else {\n      console.log('LOG')\n      console.dir(msg)\n    }\n    global.uppyLog = global.uppyLog + '\\n' + 'DEBUG LOG: ' + msg\n  }\n\n/**\n * Runs all plugins of the same type in parallel\n *\n * @param {string} type that wants to set progress\n * @param {array} files\n * @return {Promise} of all methods\n */\n  runType (type, method, files) {\n    const methods = this.plugins[type].map(\n      (plugin) => plugin[method](Utils.flatten(files))\n    )\n\n    return Promise.all(methods)\n      .catch((error) => console.error(error))\n  }\n\n/**\n * Runs a waterfall of runType plugin packs, like so:\n * All preseters(data) --> All acquirers(data) --> All uploaders(data) --> done\n */\n  run () {\n    this.log('Core is run, initializing actions, installing plugins...')\n\n    this.actions()\n\n    // Forse set `autoProceed` option to false if there are multiple selector Plugins active\n    if (this.plugins.acquirer && this.plugins.acquirer.length > 1) {\n      this.opts.autoProceed = false\n    }\n\n    // Install all plugins\n    Object.keys(this.plugins).forEach((pluginType) => {\n      this.plugins[pluginType].forEach((plugin) => {\n        plugin.install()\n      })\n    })\n\n    return\n\n    // Each Plugin can have `run` and/or `install` methods.\n    // `install` adds event listeners and does some non-blocking work, useful for `progressindicator`,\n    // `run` waits for the previous step to finish (user selects files) before proceeding\n    // ['install', 'run'].forEach((method) => {\n    //   // First we select only plugins of current type,\n    //   // then create an array of runType methods of this plugins\n    //   const typeMethods = this.types.filter((type) => this.plugins[type])\n    //     .map((type) => this.runType.bind(this, type, method))\n    //   // Run waterfall of typeMethods\n    //   return Utils.promiseWaterfall(typeMethods)\n    //     .then((result) => {\n    //       // If results are empty, don't log upload results. Hasn't run yet.\n    //       if (result[0] !== undefined) {\n    //         this.log(result)\n    //         this.log('Upload result -> success!')\n    //         return result\n    //       }\n    //     })\n    //     .catch((error) => this.log('Upload result -> failed:', error))\n    // })\n  }\n\n  initSocket (opts) {\n    if (!this.socket) {\n      this.socket = new UppySocket(opts)\n    }\n\n    return this.socket\n  }\n}\n","import yo from 'yo-yo'\n\n/**\n * Boilerplate that all Plugins share - and should not be used\n * directly. It also shows which methods final plugins should implement/override,\n * this deciding on structure.\n *\n * @param {object} main Uppy core object\n * @param {object} object with plugin options\n * @return {array | string} files or success/fail message\n */\nexport default class Plugin {\n\n  constructor (core, opts) {\n    this.core = core\n    this.opts = opts\n    this.type = 'none'\n\n    this.update = this.update.bind(this)\n    this.mount = this.mount.bind(this)\n    this.focus = this.focus.bind(this)\n    this.install = this.install.bind(this)\n  }\n\n  update () {\n    if (typeof this.el === 'undefined') {\n      return\n    }\n\n    const newEl = this.render(this.core.state)\n    yo.update(this.el, newEl)\n  }\n\n  /**\n   * Check if supplied `target` is a `string` or an `object`.\n   * If its an object  target is a plugin, and we search `plugins`\n   * for a plugin with same name and return its target.\n   *\n   * @param {String|Object} target\n   *\n   */\n  mount (target, plugin) {\n    const callerPluginName = plugin.id\n\n    if (typeof target === 'string') {\n      this.core.log(`Installing ${callerPluginName} to ${target}`)\n\n      // clear everything inside the target selector\n      // if (replaceTargetContent) {\n      //   document.querySelector(target).innerHTML = ''\n      // }\n      this.el = plugin.render(this.core.state)\n      document.querySelector(target).appendChild(this.el)\n\n      return target\n    } else {\n      // TODO: is instantiating the plugin really the way to roll\n      // just to get the plugin name?\n      const Target = target\n      const targetPluginName = new Target().id\n\n      this.core.log(`Installing ${callerPluginName} to ${targetPluginName}`)\n\n      const targetPlugin = this.core.getPlugin(targetPluginName)\n      const selectorTarget = targetPlugin.addTarget(plugin)\n\n      return selectorTarget\n    }\n  }\n\n  focus () {\n    return\n  }\n\n  install () {\n    return\n  }\n\n  run () {\n    return\n  }\n}\n","import Plugin from './Plugin'\nimport yo from 'yo-yo'\n\n/**\n * Dummy\n *\n */\nexport default class Dummy extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'acquirer'\n    this.id = 'Dummy'\n    this.title = 'Mr. Plugin'\n\n    // set default options\n    const defaultOptions = {}\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    this.strange = yo`<h1>this is strange 1</h1>`\n    this.render = this.render.bind(this)\n    this.install = this.install.bind(this)\n  }\n\n  render () {\n    const bla = yo`<h2>this is strange 2</h2>`\n    return yo`\n      <div class=\"wow-this-works\">\n        <input class=\"UppyDummy-firstInput\" type=\"text\" value=\"hello\">\n        ${this.strange}\n        ${bla}\n      </div>\n    `\n  }\n\n  focus () {\n    const firstInput = document.querySelector(`${this.target} .UppyDummy-firstInput`)\n\n    // only works for the first time if wrapped in setTimeout for some reason\n    // firstInput.focus()\n    setTimeout(function () {\n      firstInput.focus()\n    }, 10)\n  }\n\n  install () {\n    const target = this.opts.target\n    const plugin = this\n    this.target = this.mount(target, plugin)\n  }\n}\n","import Plugin from './Plugin'\nimport Utils from '../core/Utils'\nimport dragDrop from 'drag-drop'\nimport yo from 'yo-yo'\n\n/**\n * Drag & Drop plugin\n *\n */\nexport default class DragDrop extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'acquirer'\n    this.id = 'DragDrop'\n    this.title = 'Drag & Drop'\n    this.icon = yo`\n      <svg class=\"UppyIcon UppyModalTab-icon\" width=\"28\" height=\"28\" viewBox=\"0 0 16 16\">\n        <path d=\"M15.982 2.97c0-.02 0-.02-.018-.037 0-.017-.017-.035-.035-.053 0 0 0-.018-.02-.018-.017-.018-.034-.053-.052-.07L13.19.123c-.017-.017-.034-.035-.07-.053h-.018c-.018-.017-.035-.017-.053-.034h-.02c-.017 0-.034-.018-.052-.018h-6.31a.415.415 0 0 0-.446.426V11.11c0 .25.196.446.445.446h8.89A.44.44 0 0 0 16 11.11V3.023c-.018-.018-.018-.035-.018-.053zm-2.65-1.46l1.157 1.157h-1.157V1.51zm1.78 9.157h-8V.89h5.332v2.22c0 .25.196.446.445.446h2.22v7.11z\"/>\n        <path d=\"M9.778 12.89H4V2.666a.44.44 0 0 0-.444-.445.44.44 0 0 0-.445.445v10.666c0 .25.197.445.446.445h6.222a.44.44 0 0 0 .444-.445.44.44 0 0 0-.444-.444z\"/>\n        <path d=\"M.444 16h6.223a.44.44 0 0 0 .444-.444.44.44 0 0 0-.443-.445H.89V4.89a.44.44 0 0 0-.446-.446A.44.44 0 0 0 0 4.89v10.666c0 .248.196.444.444.444z\"/>\n      </svg>\n    `\n\n    // Default options\n    const defaultOptions = {\n      target: '.UppyDragDrop'\n    }\n\n    // Merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    // Check for browser dragDrop support\n    this.isDragDropSupported = this.checkDragDropSupport()\n\n    // Bind `this` to class methods\n    this.handleDrop = this.handleDrop.bind(this)\n    this.checkDragDropSupport = this.checkDragDropSupport.bind(this)\n    this.handleInputChange = this.handleInputChange.bind(this)\n    this.render = this.render.bind(this)\n  }\n\n/**\n * Checks if the browser supports Drag & Drop (not supported on mobile devices, for example).\n * @return {Boolean} true if supported, false otherwise\n */\n  checkDragDropSupport () {\n    const div = document.createElement('div')\n\n    if (!('draggable' in div) || !('ondragstart' in div && 'ondrop' in div)) {\n      return false\n    }\n\n    if (!('FormData' in window)) {\n      return false\n    }\n\n    if (!('FileReader' in window)) {\n      return false\n    }\n\n    return true\n  }\n\n  handleDrop (files) {\n    this.core.log('All right, someone dropped something...')\n\n    // this.core.emitter.emit('file-add', {\n    //   plugin: this,\n    //   acquiredFiles: files\n    // })\n\n    files.forEach((file) => {\n      this.core.emitter.emit('file-add', {\n        source: this.id,\n        name: file.name,\n        type: file.type,\n        data: file\n      })\n    })\n\n    this.core.addMeta({bla: 'bla'})\n  }\n\n  handleInputChange (ev) {\n    this.core.log('All right, something selected through input...')\n\n    const files = Utils.toArray(ev.target.files)\n\n    files.forEach((file) => {\n      console.log(file)\n      this.core.emitter.emit('file-add', {\n        source: this.id,\n        name: file.name,\n        type: file.type,\n        data: file\n      })\n    })\n  }\n\n  focus () {\n    const firstInput = document.querySelector(`${this.target} .UppyDragDrop-focus`)\n\n    // only works for the first time if wrapped in setTimeout for some reason\n    // firstInput.focus()\n    setTimeout(function () {\n      firstInput.focus()\n    }, 10)\n  }\n\n  render (state) {\n    // Another way not to render next/upload button  if Modal is used as a target\n    const target = this.opts.target.name\n\n    const onSelect = (ev) => {\n      const input = document.querySelector(`${this.target} .UppyDragDrop-input`)\n      input.click()\n    }\n\n    const next = (ev) => {\n      ev.preventDefault()\n      ev.stopPropagation()\n      this.core.emitter.emit('next')\n    }\n\n    const onSubmit = (ev) => {\n      ev.preventDefault()\n    }\n\n    return yo`\n      <div class=\"UppyDragDrop-container ${this.isDragDropSupported ? 'is-dragdrop-supported' : ''}\">\n        <form class=\"UppyDragDrop-inner\"\n              onsubmit=${onSubmit}>\n          <input class=\"UppyDragDrop-input UppyDragDrop-focus\"\n                 type=\"file\"\n                 name=\"files[]\"\n                 multiple=\"true\"\n                 value=\"\"\n                 onchange=${this.handleInputChange.bind(this)} />\n          <label class=\"UppyDragDrop-label\" onclick=${onSelect}>\n            <strong>${this.core.i18n('chooseFile')}</strong>\n            <span class=\"UppyDragDrop-dragText\">${this.core.i18n('orDragDrop')}</span>\n          </label>\n          ${!this.core.opts.autoProceed && target !== 'Modal'\n            ? yo`<button class=\"UppyDragDrop-uploadBtn UppyNextBtn\"\n                         type=\"submit\"\n                         onclick=${next}>\n                    ${this.core.i18n('upload')}\n              </button>`\n            : ''}\n        </form>\n      </div>\n    `\n  }\n\n  install () {\n    const target = this.opts.target\n    const plugin = this\n    this.target = this.mount(target, plugin)\n\n    dragDrop(`${this.target} .UppyDragDrop-container`, (files) => {\n      this.handleDrop(files)\n      this.core.log(files)\n    })\n  }\n}\n","import Plugin from './Plugin'\nimport Utils from '../core/Utils'\nimport yo from 'yo-yo'\n\nexport default class Formtag extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.id = 'Formtag'\n    this.title = 'Formtag'\n    this.type = 'acquirer'\n\n    // Default options\n    const defaultOptions = {\n      target: '.UppyForm',\n      replaceTargetContent: true,\n      multipleFiles: true\n    }\n\n    // Merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    this.render = this.render.bind(this)\n  }\n\n  handleInputChange (ev) {\n    this.core.log('All right, something selected through input...')\n\n    // this added rubbish keys like length to the resulting array\n    // const files = Object.keys(ev.target.files).map((key) => {\n    //   return ev.target.files[key]\n    // })\n\n    const files = Utils.toArray(ev.target.files)\n\n    files.forEach((file) => {\n      this.core.emitter.emit('file-add', {\n        source: this.id,\n        name: file.name,\n        type: file.type,\n        data: file\n      })\n    })\n  }\n\n  render (state) {\n    const next = (ev) => {\n      ev.preventDefault()\n      ev.stopPropagation()\n      this.core.emitter.emit('next')\n    }\n\n    return yo`<form class=\"UppyFormContainer\">\n      <input class=\"UppyForm-input\"\n             type=\"file\"\n             name=\"files[]\"\n             onchange=${this.handleInputChange.bind(this)}\n             multiple=\"${this.opts.multipleFiles ? 'true' : 'false'}\"\n             value=\"\">\n      ${!this.core.opts.autoProceed && this.opts.target.name !== 'Modal'\n        ? yo`<button class=\"UppyForm-uploadBtn UppyNextBtn\"\n                     type=\"submit\"\n                     onclick=${next}>\n              ${this.core.i18n('upload')}\n            </button>`\n        : ''}\n    </form>`\n  }\n\n  install () {\n    const target = this.opts.target\n    const plugin = this\n    this.target = this.mount(target, plugin)\n  }\n\n  // run (results) {\n  //   console.log({\n  //     class: 'Formtag',\n  //     method: 'run',\n  //     results: results\n  //   })\n  //\n  //   const button = document.querySelector(this.opts.doneButtonSelector)\n  //   var self = this\n  //\n  //   return new Promise((resolve, reject) => {\n  //     button.addEventListener('click', (e) => {\n  //       var fields = document.querySelectorAll(self.opts.selector)\n  //       var selected = [];\n  //\n  //       [].forEach.call(fields, (field, i) => {\n  //         selected.push({\n  //           from: 'Formtag',\n  //           files: field.files\n  //         })\n  //       })\n  //       resolve(selected)\n  //     })\n  //   })\n  // }\n}\n","import Plugin from './Plugin'\nimport yo from 'yo-yo'\n\n/**\n * Progress bar\n *\n */\nexport default class ProgressBar extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.id = 'ProgressBar'\n    this.title = 'Progress Bar'\n    this.type = 'progressindicator'\n\n    // set default options\n    const defaultOptions = {\n      replaceTargetContent: false\n    }\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    this.render = this.render.bind(this)\n  }\n\n  render (state) {\n    const progress = state.totalProgress || 0\n\n    return yo`<div class=\"UppyProgressBar\">\n      <div class=\"UppyProgressBar-inner\" style=\"width: ${progress}%\"></div>\n      <div class=\"UppyProgressBar-percentage\">${progress}</div>\n    </div>`\n  }\n\n  install () {\n    const target = this.opts.target\n    const plugin = this\n    this.target = this.mount(target, plugin)\n  }\n}\n","import Utils from '../core/Utils'\nimport Plugin from './Plugin'\nimport 'whatwg-fetch'\nimport yo from 'yo-yo'\n\nexport default class Google extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'acquirer'\n    this.id = 'GoogleDrive'\n    this.title = 'Google Drive'\n    this.icon = yo`\n      <svg class=\"UppyIcon UppyModalTab-icon\" width=\"28\" height=\"28\" viewBox=\"0 0 16 16\">\n        <path d=\"M2.955 14.93l2.667-4.62H16l-2.667 4.62H2.955zm2.378-4.62l-2.666 4.62L0 10.31l5.19-8.99 2.666 4.62-2.523 4.37zm10.523-.25h-5.333l-5.19-8.99h5.334l5.19 8.99z\"/>\n      </svg>\n    `\n\n    this.files = []\n\n    // Logic\n    this.addFile = this.addFile.bind(this)\n    this.getFolder = this.getFolder.bind(this)\n    this.handleClick = this.handleClick.bind(this)\n    this.logout = this.logout.bind(this)\n\n    // Visual\n    this.renderBrowserItem = this.renderBrowserItem.bind(this)\n    this.filterItems = this.filterItems.bind(this)\n    this.filterQuery = this.filterQuery.bind(this)\n    this.renderAuth = this.renderAuth.bind(this)\n    this.renderBrowser = this.renderBrowser.bind(this)\n    this.sortByTitle = this.sortByTitle.bind(this)\n    this.sortByDate = this.sortByDate.bind(this)\n    this.render = this.render.bind(this)\n\n    // set default options\n    const defaultOptions = {}\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n  }\n\n  install () {\n    // Set default state for Google Drive\n    this.core.setState({\n      googleDrive: {\n        authenticated: false,\n        files: [],\n        folders: [],\n        directory: [{\n          title: 'My Drive',\n          id: 'root'\n        }],\n        active: {},\n        filterInput: ''\n      }\n    })\n\n    const target = this.opts.target\n    const plugin = this\n    this.target = this.mount(target, plugin)\n\n    this.checkAuthentication()\n      .then((authenticated) => {\n        this.updateState({authenticated})\n\n        if (authenticated) {\n          return this.getFolder(this.core.getState().googleDrive.directory.id)\n        }\n\n        return authenticated\n      })\n      .then((newState) => {\n        this.updateState(newState)\n      })\n\n    return\n  }\n\n  focus () {\n    const firstInput = document.querySelector(`${this.target} .UppyGoogleDrive-focusInput`)\n\n    // only works for the first time if wrapped in setTimeout for some reason\n    // firstInput.focus()\n    setTimeout(function () {\n      firstInput.focus()\n    }, 10)\n  }\n\n  /**\n   * Little shorthand to update the state with my new state\n   */\n  updateState (newState) {\n    const {state} = this.core\n    const googleDrive = Object.assign({}, state.googleDrive, newState)\n\n    this.core.setState({googleDrive})\n  }\n\n  /**\n   * Check to see if the user is authenticated.\n   * @return {Promise} authentication status\n   */\n  checkAuthentication () {\n    return fetch(`${this.opts.host}/google/authorize`, {\n      method: 'get',\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    .then((res) => {\n      if (res.status >= 200 && res.status <= 300) {\n        return res.json()\n      } else {\n        this.updateState({\n          authenticated: false,\n          error: true\n        })\n        let error = new Error(res.statusText)\n        error.response = res\n        throw error\n      }\n    })\n    .then((data) => data.isAuthenticated)\n    .catch((err) => err)\n  }\n\n  /**\n   * Based on folder ID, fetch a new folder\n   * @param  {String} id Folder id\n   * @return {Promise}   Folders/files in folder\n   */\n  getFolder (id = 'root') {\n    return fetch(`${this.opts.host}/google/list?dir=${id}`, {\n      method: 'get',\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n    .then((res) => {\n      if (res.status >= 200 && res.status <= 300) {\n        return res.json().then((data) => {\n          // let result = Utils.groupBy(data.items, (item) => item.mimeType)\n          let folders = []\n          let files = []\n          data.items.forEach((item) => {\n            if (item.mimeType === 'application/vnd.google-apps.folder') {\n              folders.push(item)\n            } else {\n              files.push(item)\n            }\n          })\n          return {\n            folders,\n            files\n          }\n        })\n      } else {\n        this.handleError(res)\n        let error = new Error(res.statusText)\n        error.response = res\n        throw error\n      }\n    })\n    .catch((err) => {\n      return err\n    })\n  }\n\n  /**\n   * Fetches new folder and adds to breadcrumb nav\n   * @param  {String} id    Folder id\n   * @param  {String} title Folder title\n   */\n  getNextFolder (id, title) {\n    this.getFolder(id)\n      .then((data) => {\n        const state = this.core.getState().googleDrive\n\n        const index = state.directory.findIndex((dir) => id === dir.id)\n        let directory\n\n        if (index !== -1) {\n          directory = state.directory.slice(0, index + 1)\n        } else {\n          directory = state.directory.concat([{\n            id,\n            title\n          }])\n        }\n\n        this.updateState(Utils.extend(data, {directory}))\n      })\n  }\n\n  addFile (file) {\n    const tagFile = {\n      source: this,\n      data: file,\n      name: file.title,\n      type: this.getFileType(file),\n      isRemote: true,\n      remote: {\n        url: `${this.opts.host}/google/get?fileId=${file.id}`,\n        body: {\n          fileId: file.id\n        }\n      }\n    }\n\n    this.core.emitter.emit('file-add', tagFile)\n  }\n\n  handleError (response) {\n    this.checkAuthentication()\n      .then((authenticated) => {\n        this.updateState({authenticated})\n      })\n  }\n\n  /**\n   * Removes session token on client side.\n   */\n  logout () {\n    fetch(`${this.opts.host}/google/logout?redirect=${location.href}`, {\n      method: 'get',\n      credentials: 'include',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }\n    })\n      .then((res) => res.json())\n      .then((res) => {\n        if (res.ok) {\n          console.log('ok')\n          const newState = {\n            authenticated: false,\n            files: [],\n            folders: [],\n            directory: [{\n              title: 'My Drive',\n              id: 'root'\n            }]\n          }\n\n          this.updateState(newState)\n        }\n      })\n  }\n\n  getFileType (file) {\n    const fileTypes = {\n      'application/vnd.google-apps.folder': 'Folder',\n      'application/vnd.google-apps.document': 'Google Docs',\n      'application/vnd.google-apps.spreadsheet': 'Google Sheets',\n      'application/vnd.google-apps.presentation': 'Google Slides',\n      'image/jpeg': 'JPEG Image',\n      'image/png': 'PNG Image'\n    }\n\n    return fileTypes[file.mimeType] ? fileTypes[file.mimeType] : file.fileExtension.toUpperCase()\n  }\n\n  /**\n   * Used to set active file/folder.\n   * @param  {Object} file   Active file/folder\n   */\n  handleClick (file) {\n    const state = this.core.getState().googleDrive\n    const newState = Object.assign({}, state, {\n      active: file\n    })\n\n    this.updateState(newState)\n  }\n\n  filterQuery (e) {\n    const state = this.core.getState().googleDrive\n    this.updateState(Object.assign({}, state, {\n      filterInput: e.target.value\n    }))\n  }\n\n  filterItems (items) {\n    const state = this.core.getState().googleDrive\n    return items.filter((folder) => {\n      return folder.title.toLowerCase().indexOf(state.filterInput.toLowerCase()) !== -1\n    })\n  }\n\n  sortByTitle () {\n    const state = this.core.getState().googleDrive\n    const {files, folders, sorting} = state\n\n    let sortedFiles = files.sort((fileA, fileB) => {\n      if (sorting === 'titleDescending') {\n        return fileB.title.localeCompare(fileA.title)\n      }\n      return fileA.title.localeCompare(fileB.title)\n    })\n\n    let sortedFolders = folders.sort((folderA, folderB) => {\n      if (sorting === 'titleDescending') {\n        return folderB.title.localeCompare(folderA.title)\n      }\n      return folderA.title.localeCompare(folderB.title)\n    })\n\n    this.updateState(Object.assign({}, state, {\n      files: sortedFiles,\n      folders: sortedFolders,\n      sorting: (sorting === 'titleDescending') ? 'titleAscending' : 'titleDescending'\n    }))\n  }\n\n  sortByDate () {\n    const state = this.core.getState().googleDrive\n    const {files, folders, sorting} = state\n\n    let sortedFiles = files.sort((fileA, fileB) => {\n      let a = new Date(fileA.modifiedByMeDate)\n      let b = new Date(fileB.modifiedByMeDate)\n\n      if (sorting === 'dateDescending') {\n        return a > b ? -1 : a < b ? 1 : 0\n      }\n      return a > b ? 1 : a < b ? -1 : 0\n    })\n\n    let sortedFolders = folders.sort((folderA, folderB) => {\n      let a = new Date(folderA.modifiedByMeDate)\n      let b = new Date(folderB.modifiedByMeDate)\n\n      if (sorting === 'dateDescending') {\n        return a > b ? -1 : a < b ? 1 : 0\n      }\n\n      return a > b ? 1 : a < b ? -1 : 0\n    })\n\n    this.updateState(Object.assign({}, state, {\n      files: sortedFiles,\n      folders: sortedFolders,\n      sorting: (sorting === 'dateDescending') ? 'dateAscending' : 'dateDescending'\n    }))\n  }\n\n  /**\n   * Render user authentication view\n   */\n  renderAuth () {\n    const state = btoa(JSON.stringify({\n      redirect: location.href.split('#')[0]\n    }))\n\n    const link = `${this.opts.host}/connect/google?state=${state}`\n    return yo`\n      <div class=\"UppyGoogleDrive-authenticate\">\n        <h1>You need to authenticate with Google before selecting files.</h1>\n        <a href=${link}>Authenticate</a>\n      </div>\n    `\n  }\n\n  /**\n   * Render file browser\n   * @param  {Object} state Google Drive state\n   */\n  renderBrowser (state) {\n    let folders = state.folders\n    let files = state.files\n    let previewElem = ''\n    const isFileSelected = Object.keys(state.active).length !== 0 && JSON.stringify(state.active) !== JSON.stringify({})\n\n    if (state.filterInput !== '') {\n      folders = this.filterItems(state.folders)\n      files = this.filterItems(state.files)\n    }\n\n    folders = folders.map((folder) => this.renderBrowserItem(folder))\n    files = files.map((file) => this.renderBrowserItem(file))\n\n    const breadcrumbs = state.directory.map((dir) => yo`<li><button onclick=${this.getNextFolder.bind(this, dir.id, dir.title)}>${dir.title}</button></li> `)\n    if (isFileSelected) {\n      previewElem = yo`\n        <div>\n          <h1><span class=\"UppyGoogleDrive-fileIcon\"><img src=${state.active.iconLink}/></span>${state.active.title}</h1>\n          <ul>\n            <li>Type: ${this.getFileType(state.active)}</li>\n            <li>Modified By Me: ${state.active.modifiedByMeDate}</li>\n          </ul>\n          ${state.active.thumbnailLink ? yo`<img src=${state.active.thumbnailLink} class=\"UppyGoogleDrive-fileThumbnail\" />` : yo``}\n        </div>\n      `\n    }\n\n    return yo`\n      <div>\n        <div class=\"UppyGoogleDrive-header\">\n          <ul class=\"UppyGoogleDrive-breadcrumbs\">\n            ${breadcrumbs}\n          </ul>\n        </div>\n        <div class=\"container-fluid\">\n          <div class=\"row\">\n            <div class=\"hidden-md-down col-lg-3 col-xl-3\">\n              <ul class=\"UppyGoogleDrive-sidebar\">\n                <li class=\"UppyGoogleDrive-filter\"><input class=\"UppyGoogleDrive-focusInput\" type='text' onkeyup=${this.filterQuery} placeholder=\"Search..\" value=${state.filterInput}/></li>\n                <li><button onclick=${this.getNextFolder.bind(this, 'root', 'My Drive')}><img src=\"https://ssl.gstatic.com/docs/doclist/images/icon_11_collection_list_3.png\"/> My Drive</button></li>\n                <li><button><img src=\"https://ssl.gstatic.com/docs/doclist/images/icon_11_shared_collection_list_1.png\"/> Shared with me</button></li>\n                <li><button onclick=${this.logout}>Logout</button></li>\n              </ul>\n            </div>\n            <div class=\"col-md-12 col-lg-9 col-xl-6\">\n              <div class=\"UppyGoogleDrive-browserContainer\">\n                <table class=\"UppyGoogleDrive-browser\">\n                  <thead>\n                    <tr>\n                      <td class=\"UppyGoogleDrive-sortableHeader\" onclick=${this.sortByTitle}>Name</td>\n                      <td>Owner</td>\n                      <td class=\"UppyGoogleDrive-sortableHeader\" onclick=${this.sortByDate}>Last Modified</td>\n                      <td>Filesize</td>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    ${folders}\n                    ${files}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n            <div class=\"hidden-lg-down col-xl-2\">\n              <div class=\"UppyGoogleDrive-fileInfo\">\n                ${previewElem}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    `\n  }\n\n  renderBrowserItem (item) {\n    const state = this.core.getState().googleDrive\n    const isAFileSelected = Object.keys(state.active).length !== 0 && JSON.stringify(state.active) !== JSON.stringify({})\n    const isFolder = item.mimeType === 'application/vnd.google-apps.folder'\n    return yo`\n      <tr class=${(isAFileSelected && state.active.id === item.id) ? 'is-active' : ''}\n        onclick=${this.handleClick.bind(this, item)}\n        ondblclick=${isFolder ? this.getNextFolder.bind(this, item.id, item.title) : this.addFile.bind(this, item)}>\n        <td><span class=\"UppyGoogleDrive-folderIcon\"><img src=${item.iconLink}/></span> ${item.title}</td>\n        <td>Me</td>\n        <td>${item.modifiedByMeDate}</td>\n        <td>-</td>\n      </tr>\n    `\n  }\n\n  renderError (err) {\n    return yo`\n      <div>\n        <span>\n          Something went wrong.  Probably our fault. ${err}\n        </span>\n      </div>\n    `\n  }\n\n  render (state) {\n    if (state.googleDrive.error) {\n      return this.renderError()\n    }\n\n    if (!state.googleDrive.authenticated) {\n      return this.renderAuth()\n    }\n\n    return this.renderBrowser(state.googleDrive)\n  }\n}\n","import Plugin from './Plugin'\n\n/**\n * Spinner\n *\n */\nexport default class Spinner extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'progressindicator'\n    this.id = 'Spinner'\n    this.title = 'Spinner'\n\n    // set default options\n    const defaultOptions = {}\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n  }\n\n  setProgress (percentage) {\n    if (percentage !== 100) {\n      this.spinnerEl.classList.add('is-spinning')\n    } else {\n      this.spinnerEl.classList.remove('is-spinning')\n    }\n  }\n\n  initSpinner () {\n    const spinnerContainer = document.querySelector(this.target)\n    spinnerContainer.innerHTML = '<div class=\"UppySpinner\"></div>'\n    this.spinnerEl = document.querySelector(`${this.target} .UppySpinner`)\n  }\n\n  initEvents () {\n    this.core.emitter.on('upload-progress', (data) => {\n      const percentage = data.percentage\n      const plugin = data.plugin\n      this.core.log(\n        `progress is: ${percentage}, set by ${plugin.constructor.name}`\n      )\n      this.setProgress(percentage)\n    })\n  }\n\n  install () {\n    const caller = this\n    this.target = this.getTarget(this.opts.target, caller)\n\n    this.initSpinner()\n    this.initEvents()\n    return\n  }\n}\n","import Plugin from './Plugin'\n\nexport default class Multipart extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'uploader'\n    this.id = 'Multipart'\n    this.title = 'Multipart'\n\n    // Default options\n    const defaultOptions = {\n      fieldName: 'files[]',\n      responseUrlFieldName: 'url',\n      bundle: true\n    }\n\n    // Merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n  }\n\n  upload (file, current, total) {\n    this.core.log(`uploading ${current} of ${total}`)\n    return new Promise((resolve, reject) => {\n      // turn file into an array so we can use bundle\n      // if (!this.opts.bundle) {\n      //   files = [files[current]]\n      // }\n\n      // for (let i in files) {\n      //   formPost.append(this.opts.fieldName, files[i])\n      // }\n\n      const formPost = new FormData()\n      formPost.append(this.opts.fieldName, file.data)\n\n      const xhr = new XMLHttpRequest()\n\n      xhr.upload.addEventListener('progress', (ev) => {\n        if (ev.lengthComputable) {\n          const bytesUploaded = ev.loaded\n          const bytesTotal = ev.total\n          let percentage = (bytesUploaded / bytesTotal * 100).toFixed(2)\n          percentage = Math.round(percentage)\n\n          this.core.log(`File progress: ${percentage}`)\n\n          // Dispatch progress event\n          this.core.emitter.emit('upload-progress', {\n            uploader: this,\n            id: file.id,\n            bytesUploaded: bytesUploaded,\n            bytesTotal: bytesTotal\n          })\n        }\n      })\n\n      xhr.addEventListener('load', (ev) => {\n        if (ev.target.status === 200) {\n          const resp = JSON.parse(xhr.response)\n          file.uploadURL = resp[this.opts.responseUrlFieldName]\n\n          this.core.log(`Download ${file.name} from ${file.uploadURL}`)\n          return resolve(file)\n        }\n\n        // var upload = {}\n        //\n        // if (this.opts.bundle) {\n        //   upload = {files: files}\n        // } else {\n        //   upload = {file: files[current]}\n        // }\n\n        // return resolve(upload)\n      })\n\n      xhr.addEventListener('error', (ev) => {\n        return reject('Upload error')\n      })\n\n      xhr.open('POST', this.opts.endpoint, true)\n      xhr.send(formPost)\n    })\n  }\n\n  selectForUpload (files) {\n    const filesForUpload = []\n    Object.keys(files).forEach((file) => {\n      if (files[file].progress === 0) {\n        filesForUpload.push(files[file])\n      }\n    })\n\n    const uploaders = []\n    filesForUpload.forEach((file, i) => {\n      const current = parseInt(i, 10) + 1\n      const total = filesForUpload.length\n      uploaders.push(this.upload(file, current, total))\n    })\n\n    Promise.all(uploaders).then((result) => {\n      this.core.log('Multipart has finished uploading!')\n    })\n\n    //   console.log({\n    //     class: 'Multipart',\n    //     method: 'run',\n    //     results: results\n    //   })\n    //\n    //   const files = results\n    //\n    //   var uploaders = []\n    //\n    //   if (this.opts.bundle) {\n    //     uploaders.push(this.upload(files, 0, files.length))\n    //   } else {\n    //     for (let i in files) {\n    //       uploaders.push(this.upload(files, i, files.length))\n    //     }\n    //   }\n    //\n    //   return Promise.all(uploaders)\n  }\n\n  install () {\n    this.core.emitter.on('next', () => {\n      this.core.log('Multipart is uploading...')\n      const files = this.core.state.files\n      this.selectForUpload(files)\n    })\n  }\n}\n","import Plugin from './Plugin'\nimport tus from 'tus-js-client'\n\n/**\n * Tus resumable file uploader\n *\n */\nexport default class Tus10 extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'uploader'\n    this.id = 'Tus'\n    this.title = 'Tus'\n\n    // set default options\n    const defaultOptions = {}\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n  }\n\n/**\n * Create a new Tus upload\n *\n * @param {object} file for use with upload\n * @param {integer} current file in a queue\n * @param {integer} total number of files in a queue\n * @returns {Promise}\n */\n  upload (file, current, total) {\n    this.core.log(`uploading ${current} of ${total}`)\n\n    // Create a new tus upload\n    return new Promise((resolve, reject) => {\n      const upload = new tus.Upload(file.data, {\n\n        // TODO merge this.opts or this.opts.tus here\n        resume: false,\n        endpoint: this.opts.endpoint,\n        onError: (error) => {\n          reject('Failed because: ' + error)\n        },\n        onProgress: (bytesUploaded, bytesTotal) => {\n          // Dispatch progress event\n          this.core.emitter.emit('upload-progress', {\n            uploader: this,\n            id: file.id,\n            bytesUploaded: bytesUploaded,\n            bytesTotal: bytesTotal\n          })\n        },\n        onSuccess: () => {\n          file.uploadURL = upload.url\n          this.core.emitter.emit('upload-success', file)\n\n          this.core.log(`Download ${upload.file.name} from ${upload.url}`)\n          resolve(upload)\n        }\n      })\n      this.core.emitter.on('file-remove', (fileID) => {\n        if (fileID === file.id) {\n          upload.abort()\n        }\n      })\n      upload.start()\n    })\n  }\n\n  uploadRemote (file, current, total) {\n    console.log('here we go')\n    return new Promise((resolve, reject) => {\n      console.log(file.remote.url)\n      fetch(file.remote.url, {\n        method: 'post',\n        credentials: 'include',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(Object.assign({}, file.remote.body, {\n          target: this.opts.endpoint\n        }))\n      })\n      .then((res) => {\n        if (res.status >= 200 && res.status <= 300) {\n          this.core.log(`Remote upload of '${file.name}' successful`)\n          return resolve('Success')\n        }\n        this.core.log(`Remote upload of file '${file.name}' failed`)\n\n        if (file.acquiredBy.handleError) {\n          file.acquiredBy.handleError(res)\n        }\n\n        return reject(new Error('Error: ' + res.statusText))\n      })\n    })\n  }\n\n  uploadFiles (files) {\n    const uploaders = []\n    files.forEach((file, index) => {\n      const current = parseInt(index, 10) + 1\n      const total = files.length\n\n      if (!file.isRemote) {\n        uploaders.push(this.upload(file, current, total))\n      } else {\n        uploaders.push(this.uploadRemote(file, current, total))\n      }\n    })\n\n    return Promise.all(uploaders).then(() => {\n      return {\n        uploadedCount: files.length\n      }\n    })\n  }\n\n  selectForUpload (files) {\n    // TODO: replace files[file].isRemote with some logic\n    //\n    // filter files that are now yet being uploaded / havent been uploaded\n    // and remote too\n    const filesForUpload = Object.keys(files).filter((file) => {\n      if (files[file].progress === 0 || files[file].isRemote) {\n        return true\n      }\n      return false\n    }).map((file) => {\n      return files[file]\n    })\n\n    this.uploadFiles(filesForUpload)\n  }\n\n  install () {\n    this.core.emitter.on('next', () => {\n      this.core.log('Tus is uploading...')\n      const files = this.core.state.files\n      this.selectForUpload(files)\n    })\n  }\n}\n","import Plugin from './Plugin'\n\n/**\n * Present\n *\n */\nexport default class Present extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.id = 'Present'\n    this.title = 'Present'\n    this.type = 'presenter'\n\n    // set default options\n    const defaultOptions = {\n      target: '.UppyPresenter-container'\n    }\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n  }\n\n  render () {\n    return `\n      <div class=\"UppyPresenter\"></div>\n    `\n  }\n\n  hidePresenter () {\n    this.presenter.classList.remove('is-visible')\n  }\n\n  showPresenter (target, uploadedCount) {\n    this.presenter.classList.add('is-visible')\n    this.presenter.innerHTML = `\n      <p>You have successfully uploaded\n        <strong>${this.core.i18n('files', {'smart_count': uploadedCount})}</strong>\n      </p>\n      ${target === 'Modal'\n        ? `<button class=\"UppyPresenter-modalClose js-UppyModal-close\" type=\"button\">${this.core.i18n('closeModal')}</button>`\n        : ''}\n    `\n  }\n\n  initEvents () {\n    this.core.emitter.on('reset', (data) => {\n      this.hidePresenter()\n    })\n  }\n\n  run (results) {\n    // Emit allDone event so that, for example, Modal can hide all tabs\n    this.core.emitter.emit('allDone')\n\n    const uploadedCount = results[0].uploadedCount\n    const target = this.opts.target.name\n    this.showPresenter(target, uploadedCount)\n  }\n\n  install () {\n    const caller = this\n    this.target = this.getTarget(this.opts.target, caller)\n    this.targetEl = document.querySelector(this.target)\n    this.targetEl.innerHTML = this.render()\n    this.initEvents()\n    this.presenter = document.querySelector('.UppyPresenter')\n\n    return\n  }\n}\n","import Plugin from './Plugin'\nimport DragDrop from './DragDrop'\nimport Tus10 from './Tus10'\n\nexport default class TransloaditBasic extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.type = 'presetter'\n    this.id = 'TransloaditBasic'\n    this.title = 'Transloadit Basic'\n    this.core\n      .use(DragDrop, {modal: true, wait: true})\n      .use(Tus10, {endpoint: 'http://master.tus.io:8080'})\n  }\n}\n","import Plugin from '../Plugin'\nimport Dashboard from './Dashboard.js'\nimport Utils from '../../core/Utils'\nimport { defaultTabIcon, closeIcon, localIcon } from './icons'\nimport dragDrop from 'drag-drop'\nimport yo from 'yo-yo'\n\n/**\n * Modal Dialog & Dashboard\n */\nexport default class Modal extends Plugin {\n  constructor (core, opts) {\n    super(core, opts)\n    this.id = 'Modal'\n    this.title = 'Modal'\n    this.type = 'orchestrator'\n\n    // set default options\n    const defaultOptions = {\n      target: 'body',\n      defaultTabIcon: defaultTabIcon(),\n      panelSelectorPrefix: 'UppyModalContent-panel'\n    }\n\n    // merge default options with the ones set by user\n    this.opts = Object.assign({}, defaultOptions, opts)\n\n    this.hideModal = this.hideModal.bind(this)\n    this.showModal = this.showModal.bind(this)\n\n    this.addTarget = this.addTarget.bind(this)\n    this.actions = this.actions.bind(this)\n    this.hideAllPanels = this.hideAllPanels.bind(this)\n    this.showPanel = this.showPanel.bind(this)\n    this.initEvents = this.initEvents.bind(this)\n    this.render = this.render.bind(this)\n    this.install = this.install.bind(this)\n  }\n\n  addTarget (plugin) {\n    const callerPluginId = plugin.constructor.name\n    const callerPluginName = plugin.title || callerPluginId\n    const callerPluginIcon = plugin.icon || this.opts.defaultTabIcon\n    const callerPluginType = plugin.type\n\n    if (callerPluginType !== 'acquirer' &&\n        callerPluginType !== 'progressindicator' &&\n        callerPluginType !== 'presenter') {\n      let msg = 'Error: Modal can only be used by plugins of types: acquirer, progressindicator, presenter'\n      this.core.log(msg)\n      return\n    }\n\n    const target = {\n      id: callerPluginId,\n      name: callerPluginName,\n      icon: callerPluginIcon,\n      type: callerPluginType,\n      focus: plugin.focus,\n      render: plugin.render,\n      isHidden: true\n    }\n\n    const modal = this.core.getState().modal\n\n    this.core.setState({\n      modal: Object.assign({}, modal, {\n        targets: modal.targets.concat([target])\n      })\n    })\n\n    return this.opts.target\n  }\n\n  hideAllPanels () {\n    const modal = this.core.getState().modal\n    const newModalTargets = modal.targets.slice()\n\n    newModalTargets.forEach((target) => {\n      if (target.type === 'acquirer') {\n        target.isHidden = true\n      }\n    })\n\n    this.core.setState({modal: Object.assign({}, modal, {\n      targets: newModalTargets\n    })})\n  }\n\n  showPanel (id) {\n    const modal = this.core.getState().modal\n\n    // hide all panels, except the one that matches current id\n    const newTargets = modal.targets.map((target) => {\n      if (target.type === 'acquirer') {\n        if (target.id === id) {\n          target.focus()\n          return Object.assign({}, target, {\n            isHidden: false\n          })\n        }\n        return Object.assign({}, target, {\n          isHidden: true\n        })\n      }\n      return target\n    })\n\n    this.core.setState({modal: Object.assign({}, modal, {\n      targets: newTargets\n    })})\n  }\n\n  hideModal () {\n    // Straightforward simple way\n    // this.core.state.modal.isHidden = true\n    // this.core.updateAll()\n\n    // The right way\n    const modal = this.core.getState().modal\n\n    // const newTargets = modal.targets.map((target) => {\n    //   target.isHidden = true\n    //   return target\n    // })\n\n    // this.hideTabPanel()\n\n    this.core.setState({\n      modal: Object.assign({}, modal, {\n        isHidden: true\n        // targets: newTargets\n      })\n    })\n\n    document.body.classList.remove('is-UppyModal-open')\n  }\n\n  showModal () {\n    const modal = this.core.getState().modal\n\n    // Show first acquirer plugin when modal is open\n    // let found = false\n    // const newTargets = modal.targets.map((target) => {\n    //   if (target.type === 'acquirer' && !found) {\n    //     found = true\n    //     target.focus()\n    //\n    //     return Object.assign({}, target, {\n    //       isHidden: false\n    //     })\n    //   }\n    //   return target\n    // })\n\n    this.core.setState({\n      modal: Object.assign({}, modal, {\n        isHidden: false\n        // targets: newTargets\n      })\n    })\n\n    // add class to body that sets position fixed\n    document.body.classList.add('is-UppyModal-open')\n    // focus on modal inner block\n    document.querySelector('*[tabindex=\"0\"]').focus()\n  }\n\n  initEvents () {\n    const modal = document.querySelector(`${this.opts.target} .UppyModal`)\n    // Modal open button\n    const showModalTrigger = document.querySelector(this.opts.trigger)\n    showModalTrigger.addEventListener('click', this.showModal)\n\n    // Close the Modal on esc key press\n    document.body.addEventListener('keyup', (event) => {\n      if (event.keyCode === 27) {\n        this.hideModal()\n      }\n    })\n\n    // Close on click outside modal or close buttons\n    document.addEventListener('click', (e) => {\n      if (e.target.classList.contains('js-UppyModal-close')) {\n        this.hideModal()\n      }\n    })\n\n    // Drag Drop\n    dragDrop(`${this.opts.target} .UppyModal`, (files) => {\n      this.handleDrop(files)\n      this.core.log(files)\n    })\n\n    // @TODO Exprimental, work in progress\n    // Paste from clipboard\n    modal.addEventListener('paste', this.handlePaste.bind(this))\n  }\n\n  // @TODO Exprimental, work in progress\n  handlePaste (ev) {\n    // console.log(ev)\n    const files = Array.from(ev.clipboardData.items)\n    // console.log(files)\n    files.shift()\n    files.forEach((file) => {\n      const fileBlob = file.getAsFile()\n      this.core.emitter.emit('file-add', {\n        source: this.id,\n        name: file.name || 'name',\n        type: file.type,\n        data: fileBlob\n      })\n    })\n  }\n\n  actions () {\n    this.core.emitter.on('file-add', () => {\n      this.hideAllPanels()\n    })\n  }\n\n  handleDrop (files) {\n    this.core.log('All right, someone dropped something...')\n\n    files.forEach((file) => {\n      this.core.emitter.emit('file-add', {\n        source: this.id,\n        name: file.name,\n        type: file.type,\n        data: file\n      })\n    })\n\n    this.core.addMeta({bla: 'bla'})\n  }\n\n  handleInputChange (ev) {\n    this.core.log('All right, something selected through input...')\n\n    const files = Utils.toArray(ev.target.files)\n\n    files.forEach((file) => {\n      console.log(file)\n      this.core.emitter.emit('file-add', {\n        source: this.id,\n        name: file.name,\n        type: file.type,\n        data: file\n      })\n    })\n  }\n\n  render (state) {\n    // http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog\n\n    const autoProceed = this.core.opts.autoProceed\n    const files = state.files\n    const bus = this.core.emitter\n\n    const modalTargets = state.modal.targets\n\n    const acquirers = modalTargets.filter((target) => {\n      return target.type === 'acquirer'\n    })\n\n    const progressindicators = modalTargets.filter((target) => {\n      return target.type === 'progressindicator'\n    })\n\n    const isTouchDevice = Utils.isTouchDevice()\n\n    const onSelect = (ev) => {\n      const input = document.querySelector(`${this.opts.target} .UppyModal-input`)\n      input.click()\n    }\n\n    return yo`<div class=\"Uppy UppyTheme--default UppyModal ${isTouchDevice ? 'Uppy--isTouchDevice' : ''}\"\n                   aria-hidden=\"${state.modal.isHidden}\"\n                   aria-label=\"Uppy Dialog Window (Press escape to close)\"\n                   role=\"dialog\">\n      <div class=\"UppyModal-overlay\"\n                  onclick=${this.hideModal}></div>\n      <div class=\"UppyModal-inner\" tabindex=\"0\">\n        <div class=\"UppyModal-bar\">\n          <h1 class=\"UppyModal-title\">Upload files</h1>\n        </div>\n        <button class=\"UppyModal-close\"\n                title=\"Close Uppy modal\"\n                onclick=${this.hideModal}>${closeIcon()}\n        </button>\n        <div class=\"UppyModal-innerWrap\">\n          <div class=\"UppyModalTabs\">\n            <h3 class=\"UppyModalTabs-title\">Drop files here, paste or import from</h3>\n            <nav>\n              <ul class=\"UppyModalTabs-list\" role=\"tablist\">\n                <li class=\"UppyModalTab\">\n                  <button class=\"UppyModalTab-btn UppyModal-focus\"\n                          role=\"tab\"\n                          tabindex=\"0\"\n                          onclick=${onSelect}>\n                    ${localIcon()}\n                    <h5 class=\"UppyModalTab-name\">Local Disk</h5>\n                  </button>\n                  <input class=\"UppyModal-input\"\n                         type=\"file\"\n                         name=\"files[]\"\n                         multiple=\"true\"\n                         value=\"\"\n                         onchange=${this.handleInputChange.bind(this)} />\n                </li>\n                ${acquirers.map((target) => {\n                  return yo`<li class=\"UppyModalTab\">\n                    <button class=\"UppyModalTab-btn\"\n                            role=\"tab\"\n                            tabindex=\"0\"\n                            aria-controls=\"${this.opts.panelSelectorPrefix}--${target.id}\"\n                            aria-selected=\"${target.isHidden ? 'false' : 'true'}\"\n                            onclick=${this.showPanel.bind(this, target.id)}>\n                      ${target.icon}\n                      <h5 class=\"UppyModalTab-name\">${target.name}</h5>\n                    </button>\n                  </li>`\n                })}\n              </ul>\n            </nav>\n          </div>\n\n          <div class=\"UppyModal-dashboard\">\n            ${Dashboard(files, bus, autoProceed)}\n          </div>\n\n          ${acquirers.map((target) => {\n            return yo`<div class=\"UppyModalContent-panel\"\n                           id=\"${this.opts.panelSelectorPrefix}--${target.id}\"\n                           role=\"tabpanel\"\n                           aria-hidden=\"${target.isHidden}\">\n               <div class=\"UppyModalContent-bar\">\n                 <h2 class=\"UppyModalContent-title\">Import From ${target.name}</h2>\n                 <button class=\"UppyModalContent-back\"\n                         onclick=${this.hideAllPanels}>Back</button>\n               </div>\n              ${target.render(state)}\n            </div>`\n          })}\n\n          <div class=\"UppyModal-progressindicators\">\n            ${progressindicators.map((target) => {\n              return target.render(state)\n            })}\n          </div>\n        </div>\n      </div>\n    </div>`\n  }\n\n  install () {\n    // Set default state for Modal\n    this.core.setState({modal: {\n      isHidden: true,\n      targets: []\n    }})\n\n    const target = this.opts.target\n    const plugin = this\n    this.target = this.mount(target, plugin)\n\n    this.initEvents()\n    this.actions()\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","const en_US = {}\n\nen_US.strings = {\n  chooseFile: 'Choose a file',\n  youHaveChosen: 'You have chosen: %{fileName}',\n  orDragDrop: 'or drag it here',\n  filesChosen: {\n    0: '%{smart_count} file selected',\n    1: '%{smart_count} files selected'\n  },\n  filesUploaded: {\n    0: '%{smart_count} file uploaded',\n    1: '%{smart_count} files uploaded'\n  },\n  files: {\n    0: '%{smart_count} file',\n    1: '%{smart_count} files'\n  },\n  uploadFiles: {\n    0: 'Upload %{smart_count} file',\n    1: 'Upload %{smart_count} files'\n  },\n  selectToUpload: 'Select files to upload',\n  closeModal: 'Close Modal',\n  upload: 'Upload'\n}\n\nen_US.pluralize = function (n) {\n  if (n === 1) {\n    return 0\n  }\n  return 1\n}\n\nif (typeof window !== 'undefined' && typeof window.Uppy !== 'undefined') {\n  window.Uppy.locales.en_US = en_US\n}\n\nmodule.exports = en_US\n","/**\n * A collection of small utility functions that help with dom manipulation, adding listeners,\n * promises and other good things.\n *\n * @module Utils\n */\n\n/**\n * Runs a waterfall of promises: calls each task, passing the result\n * from the previous one as an argument. The first task is run with an empty array.\n *\n * @memberof Utils\n * @param {array} methods of Promises to run waterfall on\n * @return {Promise} of the final task\n */\nfunction promiseWaterfall (methods) {\n  const [resolvedPromise, ...tasks] = methods\n  const finalTaskPromise = tasks.reduce((prevTaskPromise, task) => {\n    return prevTaskPromise.then(task)\n  }, resolvedPromise([])) // initial value\n\n  return finalTaskPromise\n}\n\n/**\n * Shallow flatten nested arrays.\n */\nfunction flatten (arr) {\n  return [].concat.apply([], arr)\n}\n\nfunction isTouchDevice () {\n  return 'ontouchstart' in window || // works on most browsers\n          navigator.maxTouchPoints   // works on IE10/11 and Surface\n};\n\n/**\n * `querySelectorAll` that returns a normal array instead of fileList\n */\nfunction qsa (selector, context) {\n  return Array.prototype.slice.call((context || document).querySelectorAll(selector) || [])\n}\n\n/**\n * Partition array by a grouping function.\n * @param  {[type]} array      Input array\n * @param  {[type]} groupingFn Grouping function\n * @return {[type]}            Array of arrays\n */\nfunction groupBy (array, groupingFn) {\n  return array.reduce((result, item) => {\n    let key = groupingFn(item)\n    let xs = result.get(key) || []\n    xs.push(item)\n    result.set(key, xs)\n    return result\n  }, new Map())\n}\n\n/**\n * Tests if every array element passes predicate\n * @param  {Array}  array       Input array\n * @param  {Object} predicateFn Predicate\n * @return {bool}               Every element pass\n */\nfunction every (array, predicateFn) {\n  return array.reduce((result, item) => {\n    if (!result) {\n      return false\n    }\n\n    return predicateFn(item)\n  }, true)\n}\n\n/**\n * Converts list into array\n*/\nfunction toArray (list) {\n  return Array.prototype.slice.call(list || [], 0)\n}\n\n/**\n * Takes a fileName and turns it into fileID, by converting to lowercase,\n * removing extra characters and adding unix timestamp\n *\n * @param {String} fileName\n *\n */\nfunction generateFileID (fileName) {\n  let fileID = fileName.toLowerCase()\n  fileID = fileID.replace(/[^A-Z0-9]/ig, '')\n  fileID = fileID + Date.now()\n  return fileID\n}\n\nfunction extend (...objs) {\n  return Object.assign.apply(this, [{}].concat(objs))\n}\n\n/**\n * Takes function or class, returns its name.\n * Because IE doesnt support `constructor.name`.\n * https://gist.github.com/dfkaye/6384439, http://stackoverflow.com/a/15714445\n *\n * @param {Object} fn  function\n *\n */\nfunction getFnName (fn) {\n  var f = typeof fn === 'function'\n  var s = f && ((fn.name && ['', fn.name]) || fn.toString().match(/function ([^\\(]+)/))\n  return (!f && 'not a function') || (s && s[1] || 'anonymous')\n}\n\n/**\n * Reads image as data URI from file object,\n * the one you get from input[type=file] or drag & drop.\n * This will only read image files, skipping others\n *\n * @param {Object} imgObject\n * @param {Function} cb callback that will be called once the image is read\n *\n */\nfunction readImage (imgObject, cb) {\n  // if (!imgObject.type.match(/image.*/)) {\n  //   console.log('The file is not an image: ', imgObject.type)\n  //   return\n  // }\n\n  var reader = new FileReader()\n  reader.addEventListener('load', function (ev) {\n    var imgSrcBase64 = ev.target.result\n    var img = new Image()\n    img.onload = function () {\n      return cb(img)\n    }\n    img.src = imgSrcBase64\n  })\n  reader.addEventListener('error', function (err) {\n    console.log('FileReader error' + err)\n  })\n  reader.readAsDataURL(imgObject)\n}\n\nfunction getProportionalImageHeight (img, newWidth) {\n  var aspect = img.width / img.height\n  var newHeight = Math.round(newWidth / aspect)\n  return newHeight\n}\n\n/**\n * Resizes an image to specified width and height, using canvas\n * See https://davidwalsh.name/resize-image-canvas\n *\n * @param {Object} img element\n * @param {String} width of the resulting image\n * @param {String} height of the resulting image\n * @return {String} dataURL of the resized image\n */\nfunction resizeImage (img, width, height) {\n  // create an off-screen canvas\n  var canvas = document.createElement('canvas')\n  var ctx = canvas.getContext('2d')\n\n  // set its dimension to target size\n  canvas.width = width\n  canvas.height = height\n\n  // draw source image into the off-screen canvas:\n  ctx.drawImage(img, 0, 0, width, height)\n\n  // encode image to data-uri with base64 version of compressed image\n  // canvas.toDataURL('image/jpeg', quality);  // quality = [0.0, 1.0]\n  return canvas.toDataURL()\n}\n\nexport default {\n  promiseWaterfall,\n  generateFileID,\n  getFnName,\n  toArray,\n  every,\n  flatten,\n  groupBy,\n  qsa,\n  extend,\n  readImage,\n  resizeImage,\n  getProportionalImageHeight,\n  isTouchDevice\n}\n","/**\n * Translates strings with interpolation & pluralization support.Extensible with custom dictionaries\n * and pluralization functions.\n *\n * Borrows heavily from and inspired by Polyglot https://github.com/airbnb/polyglot.js,\n * basically a stripped-down version of it. Differences: pluralization functions are not hardcoded\n * and can be easily added among with dictionaries, nested objects are used for pluralization\n * as opposed to `||||` delimeter\n *\n * Usage example: `translator.translate('files_chosen', {smart_count: 3})`\n *\n * @param {object} opts\n */\nexport default class Translator {\n  constructor (opts) {\n    const defaultOptions = {}\n    this.opts = Object.assign({}, defaultOptions, opts)\n  }\n\n/**\n * Takes a string with placeholder variables like `%{smart_count} file selected`\n * and replaces it with values from options `{smart_count: 5}`\n *\n * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE\n * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299\n *\n * @param {string} phrase that needs interpolation, with placeholders\n * @param {object} options with values that will be used to replace placeholders\n * @return {string} interpolated\n */\n  interpolate (phrase, options) {\n    const replace = String.prototype.replace\n    const dollarRegex = /\\$/g\n    const dollarBillsYall = '$$$$'\n\n    for (let arg in options) {\n      if (arg !== '_' && options.hasOwnProperty(arg)) {\n        // Ensure replacement value is escaped to prevent special $-prefixed\n        // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n        // be escaped with \"$\" itself, and we need two in the resulting output.\n        var replacement = options[arg]\n        if (typeof replacement === 'string') {\n          replacement = replace.call(options[arg], dollarRegex, dollarBillsYall)\n        }\n        // We create a new `RegExp` each time instead of using a more-efficient\n        // string replace so that the same argument can be replaced multiple times\n        // in the same phrase.\n        phrase = replace.call(phrase, new RegExp('%\\\\{' + arg + '\\\\}', 'g'), replacement)\n      }\n    }\n    return phrase\n  }\n\n/**\n * Public translate method\n *\n * @param {string} key\n * @param {object} options with values that will be used later to replace placeholders in string\n * @return {string} translated (and interpolated)\n */\n  translate (key, options) {\n    if (options && options.smart_count) {\n      var plural = this.opts.locales.pluralize(options.smart_count)\n      return this.interpolate(this.opts.locales.strings[key][plural], options)\n    }\n\n    return this.interpolate(this.opts.locales.strings[key], options)\n  }\n}\n","import ee from 'events'\n\nexport default class UppySocket {\n  constructor (opts) {\n    this.queued = []\n    this.isOpen = false\n    this.socket = new WebSocket(opts.target)\n    this.emitter = new ee.EventEmitter()\n\n    this.socket.onopen = (e) => {\n      this.isOpen = true\n\n      while (this.queued.length > 0 && this.isOpen) {\n        const first = this.queued[0]\n        this.send(first.action, first.payload)\n        this.queued = this.queued.slice(1)\n      }\n    }\n\n    this.socket.onclose = (e) => {\n      this.isOpen = false\n    }\n\n    this._handleMessage = this._handleMessage.bind(this)\n\n    this.socket.onmessage = this._handleMessage\n\n    this.emit = this.emit.bind(this)\n    this.on = this.on.bind(this)\n    this.once = this.once.bind(this)\n    this.send = this.send.bind(this)\n  }\n\n  send (action, payload) {\n    // attach uuid\n\n    if (!this.isOpen) {\n      this.queued.push({action, payload})\n      return\n    }\n\n    this.socket.send(JSON.stringify({\n      action,\n      payload\n    }))\n  }\n\n  on (action, handler) {\n    this.emitter.on(action, handler)\n  }\n\n  emit (action, payload) {\n    this.emitter.emit(action, payload)\n  }\n\n  once (action, handler) {\n    this.emitter.once(action, handler)\n  }\n\n  _handleMessage (e) {\n    try {\n      const message = JSON.parse(e.data)\n      this.emit(message.action, message.payload)\n    } catch (err) {\n      console.log(err)\n    }\n  }\n}\n","import html from 'yo-yo'\nimport FileItem from './FileItem'\nimport { uploadIcon, dashboardBgIcon } from './icons'\n\nfunction Dashboard (files, bus, autoProceed) {\n  const next = (ev) => {\n    bus.emit('next')\n  }\n\n  const selectedFiles = Object.keys(files).filter((file) => {\n    return files[file].progress !== 100\n  })\n  const totalFileCount = Object.keys(files).length\n  const selectedFileCount = Object.keys(selectedFiles).length\n  const isSomethingSelected = selectedFileCount > 0\n\n  return html`<div class=\"UppyDashboard\">\n    ${totalFileCount === 0\n      ? html`<div class=\"UppyDashboard-bgIcon\">${dashboardBgIcon()}</div>`\n      : ''}\n    <ul class=\"UppyDashboard-list\">\n      ${Object.keys(files).map((fileID) => {\n        return FileItem(bus, files[fileID])\n      })}\n    </ul>\n    ${!autoProceed && isSomethingSelected\n      ? html`<button class=\"UppyDashboard-upload\"\n                     type=\"button\"\n                     onclick=${next}>\n                ${uploadIcon()}\n                <sup class=\"UppyDashboard-uploadCount\">${selectedFileCount}</sup>\n             </button>`\n      : null\n    }\n  </div>`\n}\n\nexport default Dashboard\n","import html from 'yo-yo'\n\n// https://css-tricks.com/creating-svg-icon-system-react/\n\nexport function defaultTabIcon () {\n  return html`<svg class=\"UppyIcon UppyModalTab-icon\" width=\"224\" height=\"224\" viewBox=\"0 0 224 224\">\n    <path d=\"M112 224c61.856 0 112-50.144 112-112S173.856 0 112 0 0 50.144 0 112s50.144 112 112 112zm0-12c55.228 0 100-44.772 100-100S167.228 12 112 12 12 56.772 12 112s44.772 100 100 100z\"/>\n    <path d=\"M147.67 132.24v57.43H77v-57.43H29.79l82.38-103.71 82.37 103.71h-46.87z\" fill=\"#FFF\"/>\n  </svg>`\n}\n\nexport function localIcon () {\n  return html`<svg class=\"UppyIcon UppyModalTab-icon\" width=\"27\" height=\"25\" viewBox=\"0 0 27 25\">\n    <path d=\"M5.586 9.288a.313.313 0 0 0 .282.176h4.84v3.922c0 1.514 1.25 2.24 2.792 2.24 1.54 0 2.79-.726 2.79-2.24V9.464h4.84c.122 0 .23-.068.284-.176a.304.304 0 0 0-.046-.324L13.735.106a.316.316 0 0 0-.472 0l-7.63 8.857a.302.302 0 0 0-.047.325z\"/>\n    <path d=\"M24.3 5.093c-.218-.76-.54-1.187-1.208-1.187h-4.856l1.018 1.18h3.948l2.043 11.038h-7.193v2.728H9.114v-2.725h-7.36l2.66-11.04h3.33l1.018-1.18H3.907c-.668 0-1.06.46-1.21 1.186L0 16.456v7.062C0 24.338.676 25 1.51 25h23.98c.833 0 1.51-.663 1.51-1.482v-7.062L24.3 5.093z\"/>\n  </svg>`\n}\n\nexport function backIcon () {\n  return html`<svg class=\"UppyIcon\" width=\"7px\" height=\"10px\" viewBox=\"0 0 23 45\">\n    <polygon points=\"21.2678133 0.318896058 1.26781326 21.8188961 0.634228199 22.5 1.26781326 23.1811039 21.2678133 44.6811039 22.7321867 43.3188961 2.73218674 21.8188961 2.73218674 23.1811039 22.7321867 1.68110394\"></polygon>\n  </svg>`\n}\n\nexport function closeIcon () {\n  return html`<svg class=\"UppyIcon\" width=\"14px\" height=\"14px\" viewBox=\"0 0 19 19\">\n    <polygon points=\"17.3182539 17.2324466 9.93955339 9.85374611 9.586 9.50019272 9.23244661 9.85374611 1.85374611 17.2324466 2.56085289 17.2324466 1.93955339 16.6111471 1.93955865 17.3182486 9.31803946 9.93954813 9.67158232 9.58599474 9.31803419 9.23244661 1.93955339 1.85396581 1.93961588 2.56101008 2.56091538 1.93949089 1.85375137 1.93955865 9.23245187 9.31803946 9.586 9.67157706 9.93954813 9.31803946 17.3182486 1.93955865 16.6111471 1.93955339 17.2324466 2.56085289 17.2324466 1.85374611 9.85374611 9.23244661 9.50019272 9.586 9.85374611 9.93955339 17.2324466 17.3182539 17.9395534 16.6111471 10.5608529 9.23244661 10.5608529 9.93955339 17.9395534 2.56085289 18.2931068 2.2072995 17.9395534 1.85374611 17.3182539 1.23244661 16.9647058 0.878898482 16.6111524 1.23244135 9.23245187 8.61092215 9.93954813 8.61092215 2.56084763 1.23244135 2.20723173 0.87883598 1.85368362 1.23250911 1.23238412 1.85402831 0.878955712 2.20758169 1.23244661 2.56107259 8.61092741 9.93955339 8.61092215 9.23245187 1.23244135 16.6111524 0.878898482 16.9647058 1.23244661 17.3182539 1.85374611 17.9395534 2.2072995 18.2931068 2.56085289 17.9395534 9.93955339 10.5608529 9.23244661 10.5608529 16.6111471 17.9395534\"></polygon>\n  </svg>`\n}\n\nexport function pluginIcon () {\n  return html`<svg class=\"UppyIcon\" width=\"16px\" height=\"16px\" viewBox=\"0 0 32 30\" class=\"UppyModalTab-icon\">\n      <path d=\"M6.6209894,11.1451162 C6.6823051,11.2751669 6.81374248,11.3572188 6.95463813,11.3572188 L12.6925482,11.3572188 L12.6925482,16.0630427 C12.6925482,17.880509 14.1726048,18.75 16.0000083,18.75 C17.8261072,18.75 19.3074684,17.8801847 19.3074684,16.0630427 L19.3074684,11.3572188 L25.0437478,11.3572188 C25.1875787,11.3572188 25.3164069,11.2751669 25.3790272,11.1451162 C25.4370814,11.0173358 25.4171865,10.8642587 25.3252129,10.7562615 L16.278212,0.127131837 C16.2093949,0.0463771751 16.1069846,0 15.9996822,0 C15.8910751,0 15.7886648,0.0463771751 15.718217,0.127131837 L6.6761083,10.7559371 C6.58250402,10.8642587 6.56293518,11.0173358 6.6209894,11.1451162 L6.6209894,11.1451162 Z\"/>\n      <path d=\"M28.8008722,6.11142645 C28.5417891,5.19831555 28.1583331,4.6875 27.3684848,4.6875 L21.6124454,4.6875 L22.8190234,6.10307874 L27.4986725,6.10307874 L29.9195817,19.3486449 L21.3943891,19.3502502 L21.3943891,22.622552 L10.8023461,22.622552 L10.8023461,19.3524977 L2.07815702,19.3534609 L5.22979699,6.10307874 L9.17871529,6.10307874 L10.3840011,4.6875 L4.6308691,4.6875 C3.83940559,4.6875 3.37421888,5.2390909 3.19815864,6.11142645 L0,19.7470874 L0,28.2212959 C0,29.2043992 0.801477937,30 1.78870751,30 L30.2096773,30 C31.198199,30 32,29.2043992 32,28.2212959 L32,19.7470874 L28.8008722,6.11142645 L28.8008722,6.11142645 Z\"/>\n    </svg>`\n}\n\nexport function checkIcon () {\n  return html`<svg class=\"UppyIcon\" width=\"18px\" height=\"18px\" viewBox=\"0 0 18 18\">\n    <ellipse fill=\"#7AC824\" cx=\"8\" cy=\"8\" rx=\"8\" ry=\"8\"/>\n    <polygon fill=\"#FFFFFF\" points=\"6.93333333 12 3.2 8.13104347 4.26659124 7.02575014 6.93333333 9.78917886 11.7189271 4.8 12.8 5.92030049 6.93333333 12\"/>\n  </svg>`\n}\n\nexport function removeIcon () {\n  return html`<svg aria-hidden=\"true\" class=\"UppyIcon\" width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\">\n    <path d=\"M8,16 C12.418278,16 16,12.418278 16,8 C16,3.581722 12.418278,0 8,0 C3.581722,0 0,3.581722 0,8 C0,12.418278 3.581722,16 8,16 L8,16 Z M8,15.04 C4.11191536,15.04 0.96,11.8880846 0.96,8 C0.96,4.11191536 4.11191536,0.96 8,0.96 C11.8880846,0.96 15.04,4.11191536 15.04,8 C15.04,11.8880846 11.8880846,15.04 8,15.04 L8,15.04 Z\"/>\n    <polygon points=\"11.7336473 11.0546647 4.94532725 4.26650475 4.26651275 4.94533525 11.0548327 11.7334953\"/>\n    <polygon points=\"4.94532725 11.7334953 11.7336473 4.94533525 11.0548327 4.26650475 4.26651275 11.0546647\"/>\n  </svg>`\n}\n\nexport function uploadIcon () {\n  return html`<svg class=\"UppyIcon\" width=\"37\" height=\"33\" viewBox=\"0 0 37 33\">\n    <path d=\"M29.107 24.5c4.07 0 7.393-3.355 7.393-7.442 0-3.994-3.105-7.307-7.012-7.502l.468.415C29.02 4.52 24.34.5 18.886.5c-4.348 0-8.27 2.522-10.138 6.506l.446-.288C4.394 6.782.5 10.758.5 15.608c0 4.924 3.906 8.892 8.76 8.892h4.872c.635 0 1.095-.467 1.095-1.104 0-.636-.46-1.103-1.095-1.103H9.26c-3.644 0-6.63-3.035-6.63-6.744 0-3.71 2.926-6.685 6.57-6.685h.964l.14-.28.177-.362c1.477-3.4 4.744-5.576 8.347-5.576 4.58 0 8.45 3.452 9.01 8.072l.06.536.05.446h1.101c2.87 0 5.204 2.37 5.204 5.295s-2.333 5.296-5.204 5.296h-6.062c-.634 0-1.094.467-1.094 1.103 0 .637.46 1.104 1.094 1.104h6.12z\"/>\n    <path d=\"M23.196 18.92l-4.828-5.258-.366-.4-.368.398-4.828 5.196a1.13 1.13 0 0 0 0 1.546c.428.46 1.11.46 1.537 0l3.45-3.71-.868-.34v15.03c0 .64.445 1.118 1.075 1.118.63 0 1.075-.48 1.075-1.12V16.35l-.867.34 3.45 3.712a1 1 0 0 0 .767.345 1 1 0 0 0 .77-.345c.416-.33.416-1.036 0-1.485v.003z\"/>\n  </svg>`\n}\n\nexport function fileIcon (fileType) {\n  return html`<svg class=\"UppyIcon\" width=\"90\" height=\"90\" viewBox=\"0 0 21 29\">\n    <path d=\"M2.473.31C1.44.31.59 1.21.59 2.307V26.31c0 1.097.85 2 1.883 2H18.71c1.03 0 1.88-.903 1.88-2V7.746a.525.525 0 0 0-.014-.108v-.015a.51.51 0 0 0-.014-.03v-.017a.51.51 0 0 0-.015-.03.482.482 0 0 0-.014-.016v-.015a.482.482 0 0 0-.015-.015.51.51 0 0 0-.014-.03.482.482 0 0 0-.014-.017.51.51 0 0 0-.015-.03.483.483 0 0 0-.03-.03L13.636.45a.47.47 0 0 0-.118-.093.448.448 0 0 0-.044-.015.448.448 0 0 0-.044-.016.448.448 0 0 0-.045-.015.44.44 0 0 0-.073 0H2.474zm0 .99h10.372v4.943c0 1.097.85 2 1.88 2h4.932V26.31c0 .56-.42 1.007-.948 1.007H2.472c-.527 0-.95-.446-.95-1.007V2.308c0-.56.423-1.008.95-1.008zm11.305.667l4.843 4.927.352.357h-4.246c-.527 0-.948-.446-.948-1.007V1.967z\">\n    <text font-family=\"ArialMT, Arial\"\n          font-size=\"5\"\n          font-weight=\"bold\"\n          text-anchor=\"middle\"\n          x=\"11\"\n          y=\"22\">\n      ${fileType.specific ? fileType.specific.toUpperCase() : '?'}\n    </text>\n  </svg>`\n}\n\nexport function dashboardBgIcon () {\n  return html`<svg class=\"UppyIcon\" width=\"280\" height=\"240\" viewBox=\"0 0 280 240\"><g fill=\"none\" fill-rule=\"evenodd\"><path d=\"M219.505 10.89c-3.398-1.585-7.486-.12-9.06 3.254l-34.427 73.83c-1.573 3.375-.072 7.456 3.326 9.04l53.414 24.908c3.388 1.58 7.48.107 9.053-3.268l26.628-57.1c.05-.114.085-.232.11-.354l.02-.046c0-.038 0-.076-.003-.114l.025-.052a1.69 1.69 0 0 0-.007-.115 1.675 1.675 0 0 0-.023-.07l.022-.047a1.698 1.698 0 0 0-.028-.07c0-.037 0-.075-.003-.113a1.665 1.665 0 0 0-.02-.074 1.69 1.69 0 0 0-.007-.116 1.7 1.7 0 0 0-.056-.14l-12.44-31.8a1.694 1.694 0 0 0-.255-.466c-.04-.04-.08-.078-.124-.114a1.7 1.7 0 0 0-.122-.117c-.04-.04-.082-.08-.126-.115a1.708 1.708 0 0 0-.24-.112l-35.653-16.625-.002-.005zm-1.42 3.045l34.12 15.91-7.09 15.205c-1.573 3.374-.072 7.456 3.316 9.036l16.226 7.565-25.914 55.573c-.803 1.723-2.826 2.453-4.563 1.643L180.764 93.96c-1.734-.81-2.485-2.83-1.68-4.556l34.426-73.827a3.422 3.422 0 0 1 4.572-1.643h.003zm36.233 19.394l8.865 22.583.645 1.638-13.967-6.513c-1.733-.808-2.478-2.826-1.674-4.55l6.135-13.157h-.002z\" fill=\"#231F20\"/><text font-family=\"PTSans-Bold, PT Sans\" font-size=\"22.54\" font-weight=\"bold\" fill=\"#E02D79\" transform=\"rotate(25 88.613 485.092)\"><tspan x=\"14.445\" y=\"70.225\">MP3</tspan></text><path d=\"M7.952 35.956c-3.408 1.59-4.924 5.657-3.355 9.022l34.332 73.626c1.568 3.364 5.663 4.827 9.07 3.238l53.56-24.975c3.396-1.584 4.91-5.66 3.34-9.026L78.347 30.9a1.66 1.66 0 0 0-.2-.31l-.022-.047a1.673 1.673 0 0 0-.09-.07l-.023-.053a1.68 1.68 0 0 0-.093-.07 1.674 1.674 0 0 0-.07-.026l-.02-.046a1.698 1.698 0 0 0-.072-.023 1.673 1.673 0 0 0-.09-.07 1.663 1.663 0 0 0-.07-.03 1.68 1.68 0 0 0-.092-.07 1.702 1.702 0 0 0-.142-.046l-32.39-10.824a1.698 1.698 0 0 0-.523-.104c-.055.004-.11.012-.165.022-.057.003-.113.01-.168.018a1.718 1.718 0 0 0-.17.023c-.083.032-.164.07-.24.113l-35.75 16.67-.005-.002zm1.416 3.037L43.58 23.04l7.07 15.16c1.57 3.366 5.665 4.83 9.062 3.244l16.268-7.586 25.842 55.418c.8 1.718.055 3.735-1.687 4.547l-53.558 24.975c-1.738.81-3.77.093-4.574-1.628L7.673 43.548c-.8-1.718-.047-3.743 1.69-4.553l.005-.002zM47.612 23.65l23.022 7.664 1.67.554-14.004 6.53c-1.74.81-3.765.09-4.568-1.63l-6.117-13.12-.003.002z\" fill=\"#231F20\"/><text font-family=\"PTSans-Bold, PT Sans\" font-size=\"22.477\" font-weight=\"bold\" fill=\"#E02D79\" transform=\"rotate(-25 88.493 15.502)\"><tspan x=\"16.986\" y=\"70.453\">PDF</tspan></text><g><path d=\"M111.598.002c-3.762 0-6.858 3.05-6.858 6.768v81.347c0 3.718 3.096 6.778 6.858 6.778h59.14c3.752 0 6.848-3.06 6.848-6.778V25.203a1.663 1.663 0 0 0-.05-.366v-.05a1.676 1.676 0 0 0-.052-.103v-.057a1.684 1.684 0 0 0-.054-.102 1.676 1.676 0 0 0-.05-.054v-.05a1.7 1.7 0 0 0-.056-.05 1.676 1.676 0 0 0-.05-.103 1.665 1.665 0 0 0-.052-.057 1.684 1.684 0 0 0-.054-.102 1.704 1.704 0 0 0-.11-.102l-24.8-23.53a1.7 1.7 0 0 0-.43-.315 1.717 1.717 0 0 0-.16-.05 1.713 1.713 0 0 0-.16-.054 1.718 1.718 0 0 0-.165-.05 1.722 1.722 0 0 0-.265 0h-39.476L111.598 0zm0 3.355h37.78V20.11c0 3.717 3.095 6.777 6.846 6.777h17.964v61.23c0 1.898-1.53 3.413-3.453 3.413h-59.14c-1.92 0-3.46-1.512-3.46-3.413V6.773c0-1.898 1.54-3.416 3.46-3.416h.003zm41.177 2.26l17.64 16.698 1.282 1.21H156.23c-1.918 0-3.45-1.51-3.45-3.413V5.617h-.005z\" fill=\"#231F20\"/><text font-family=\"PTSans-Bold, PT Sans\" font-size=\"22.508\" font-weight=\"bold\" fill=\"#E02D79\" transform=\"translate(104.74)\"><tspan x=\"19.574\" y=\"70.341\">JPG</tspan></text></g><g><g fill=\"#E02D79\"><path d=\"M115.432 194.18h50.04v45.698h-50.04z\"/><path d=\"M82 199.29L140.334 126l58.334 73.29z\"/></g><path d=\"M108 214.498s5.284 2.323 5.284 6.018c0 5.422 17.384-5.76 17.384-5.76l1.332-15.23-11.732-14.202L110.4 183l-2.4 31.498z\" fill=\"#FFF\"/><path d=\"M180 181.73c0-9.938-3.172-9.823-3.172-9.823s.682-5.31-1.816-5.31c-2.5 0-3.61.565-4.878.565-1.507 0-2.724.115-2.724.115s-3.628-7.567-7.138-7.567c-2.054 0-1.134-6.71-7.26-6.71-4.76 0-5.445.62-9.517.62-4.073 0-9.517.34-12.936.34-5.128 0-17.77 11.327-24.118 19.85-.654 3.2-1.4 8.22-1.4 17.678 0 2.483-2.042 12.197-2.042 15.02 0 2.82 3.593 11.256 8.248 11.256 2.835 0 4.31-1.693 4.31-3.05 0-1.36-.682-5.65-.682-7.682 0-3.015 5.615-22.585 5.615-23.04 0 0-.728 6.585-.728 13.7 0 7.295 9.95 10.02 10.655 10.02 0 0-12.24.038-12.24-7.532 0 0-.91 4.736-.91 7.68 0 2.946.794 5.985.794 7.453 0 1.95-2.248 4.634-5.293 5.13.773 14.262 15.71 15.557 18.114 15.557 2.467 0 14.89-2.258 14.89-6.663v-.643s-.265-4.342-.265-5.826c0 0 3.232 1.3 5.948 1.3s14.823-3.814 14.823-14.207c0 0 1.927.226 3.065.226 1.14 0 1.817-.225 1.817-1.354 0-1.13-4.758-9.714-4.758-12.63.004-1.834.23-3.66.67-5.44 0 0 12.93.904 12.93-9.03z\" fill=\"#231F20\"/><path d=\"M162.273 201.9c2.896 0 2.725 2.544 2.725 5.087 0 2.544-.282 14.013-13.734 14.013-3.062 0-7.335-2.488-7.263-4.858.116-3.843 7.38-1.975 7.38-9.605 0 0 .793-3.503-2.27-3.503-3.062 0 .738-2.034 5.336-2.034 2.555 0 3.404 1.13 3.404 5.877 0 5.762-3.103 7.756-2.337 7.875.583.09 5.157-1.998 5.157-6.746.016-3.846-.666-6.106 1.603-6.106z\" fill=\"#FFF\"/><path d=\"M120.763 184s7.346-6.766 11.11-6.766c1.026 0 4.1-.34 5.972-.34 3.078 0 10.082-2.45 10.082-4.057a11.536 11.536 0 0 1 6.666-2.2c3.336 0 6.323 1.692 6.323.17 0-.677.342-2.537 3.078-2.537 2.735 0 1.88-2.03 1.88-2.03s-3.585-5.24-6.324-5.24c-2.74 0-4.778 2.364-7.86 2.364-9.226 0-6.666-1.86-16.405-1.86-2.39 0-9.74 6.766-10.082 9.13 0 0-8.203 3.212-8.203 5.91l2.75 4.58 1.013 2.876z\" fill=\"#E02D79\"/><path d=\"M133 171s2.41-2.37 4.484-2.37a13.62 13.62 0 0 1 5.516 1.33s-1.205-2.96-5.516-2.96c-4.31 0-4.484 4-4.484 4zM158 168s.835-1.42 2.33-1.42c.975.037 1.91.37 2.67.95 0 0-1.002-2.53-2.836-2.53-1.834 0-2.164 3-2.164 3z\" fill=\"#231F20\"/><path d=\"M162 172.234c0 2.282 4.89 5.766 8.89 5.766 4 0 5.11-6.086 5.11-7.607 0-1.522-.89-2.393-2-2.393-1.11 0-3.666.898-4.777.87-4.225-.136-7.223.19-7.223 3.364zM170.77 185s-1.783 4.777-8.126 4.777-8.46-1.11-11.025-1.11c-2.565 0-6.013 1.552-7.348 1.552s-2.226-.777-3.113-.777c-.89 0 2.116 11.557 4.785 11.557 0 0 2.56-2.22 9.243-2.22 2.782 0 3.565 1.552 3.565 1.552.946-.27 1.915-.457 2.895-.555 1.335 0-.89-2.222-.89-4 0-1.78 4.007-5.558 6.46-5.558 1.78 0 7.782-.89 7.782-2.447s-4.23-.552-4.23-2.773z\" fill=\"#FFF\"/></g></g></svg>`\n}\n","var bel = require('bel') // turns template tag into DOM elements\nvar morphdom = require('morphdom') // efficiently diffs + morphs two DOM elements\nvar defaultEvents = require('./update-events.js') // default events to be copied when dom elements update\n\nmodule.exports = bel\n\n// TODO move this + defaultEvents to a new module once we receive more feedback\nmodule.exports.update = function (fromNode, toNode, opts) {\n  if (!opts) opts = {}\n  if (opts.events !== false) {\n    if (!opts.onBeforeMorphEl) opts.onBeforeMorphEl = copier\n  }\n\n  return morphdom(fromNode, toNode, opts)\n\n  // morphdom only copies attributes. we decided we also wanted to copy events\n  // that can be set via attributes\n  function copier (f, t) {\n    // copy events:\n    var events = opts.events || defaultEvents\n    for (var i = 0; i < events.length; i++) {\n      var ev = events[i]\n      if (t[ev]) { // if new element has a whitelisted attribute\n        f[ev] = t[ev] // update existing element\n      } else if (f[ev]) { // if existing element has it and new one doesnt\n        f[ev] = undefined // remove it from existing element\n      }\n    }\n    // copy values for form elements\n    if ((f.nodeName === 'INPUT' && f.type !== 'file') || f.nodeName === 'TEXTAREA' || f.nodeName === 'SELECT') {\n      if (t.getAttribute('value') === null) t.value = f.value\n    }\n  }\n}\n","module.exports = dragDrop\n\nvar flatten = require('flatten')\nvar parallel = require('run-parallel')\n\nfunction dragDrop (elem, listeners) {\n  if (typeof elem === 'string') {\n    elem = window.document.querySelector(elem)\n  }\n\n  if (typeof listeners === 'function') {\n    listeners = { onDrop: listeners }\n  }\n\n  var timeout\n\n  elem.addEventListener('dragenter', stopEvent, false)\n  elem.addEventListener('dragover', onDragOver, false)\n  elem.addEventListener('dragleave', onDragLeave, false)\n  elem.addEventListener('drop', onDrop, false)\n\n  // Function to remove drag-drop listeners\n  return function remove () {\n    removeDragClass()\n    elem.removeEventListener('dragenter', stopEvent, false)\n    elem.removeEventListener('dragover', onDragOver, false)\n    elem.removeEventListener('dragleave', onDragLeave, false)\n    elem.removeEventListener('drop', onDrop, false)\n  }\n\n  function onDragOver (e) {\n    e.stopPropagation()\n    e.preventDefault()\n    if (e.dataTransfer.items) {\n      // Only add \"drag\" class when `items` contains a file\n      var items = toArray(e.dataTransfer.items).filter(function (item) {\n        return item.kind === 'file'\n      })\n      if (items.length === 0) return\n    }\n\n    elem.classList.add('drag')\n    clearTimeout(timeout)\n\n    if (listeners.onDragOver) {\n      listeners.onDragOver(e)\n    }\n\n    e.dataTransfer.dropEffect = 'copy'\n    return false\n  }\n\n  function onDragLeave (e) {\n    e.stopPropagation()\n    e.preventDefault()\n\n    if (listeners.onDragLeave) {\n      listeners.onDragLeave(e)\n    }\n\n    clearTimeout(timeout)\n    timeout = setTimeout(removeDragClass, 50)\n\n    return false\n  }\n\n  function onDrop (e) {\n    e.stopPropagation()\n    e.preventDefault()\n\n    if (listeners.onDragLeave) {\n      listeners.onDragLeave(e)\n    }\n\n    clearTimeout(timeout)\n    removeDragClass()\n\n    var pos = {\n      x: e.clientX,\n      y: e.clientY\n    }\n\n    if (e.dataTransfer.items) {\n      // Handle directories in Chrome using the proprietary FileSystem API\n      var items = toArray(e.dataTransfer.items).filter(function (item) {\n        return item.kind === 'file'\n      })\n\n      if (items.length === 0) return\n\n      parallel(items.map(function (item) {\n        return function (cb) {\n          processEntry(item.webkitGetAsEntry(), cb)\n        }\n      }), function (err, results) {\n        // This catches permission errors with file:// in Chrome. This should never\n        // throw in production code, so the user does not need to use try-catch.\n        if (err) throw err\n        if (listeners.onDrop) {\n          listeners.onDrop(flatten(results), pos)\n        }\n      })\n    } else {\n      var files = toArray(e.dataTransfer.files)\n\n      if (files.length === 0) return\n\n      files.forEach(function (file) {\n        file.fullPath = '/' + file.name\n      })\n\n      if (listeners.onDrop) {\n        listeners.onDrop(files, pos)\n      }\n    }\n\n    return false\n  }\n\n  function removeDragClass () {\n    elem.classList.remove('drag')\n  }\n}\n\nfunction stopEvent (e) {\n  e.stopPropagation()\n  e.preventDefault()\n  return false\n}\n\nfunction processEntry (entry, cb) {\n  var entries = []\n\n  if (entry.isFile) {\n    entry.file(function (file) {\n      file.fullPath = entry.fullPath  // preserve pathing for consumer\n      cb(null, file)\n    }, function (err) {\n      cb(err)\n    })\n  } else if (entry.isDirectory) {\n    var reader = entry.createReader()\n    readEntries()\n  }\n\n  function readEntries () {\n    reader.readEntries(function (entries_) {\n      if (entries_.length > 0) {\n        entries = entries.concat(toArray(entries_))\n        readEntries() // continue reading entries until `readEntries` returns no more\n      } else {\n        doneEntries()\n      }\n    })\n  }\n\n  function doneEntries () {\n    parallel(entries.map(function (entry) {\n      return function (cb) {\n        processEntry(entry, cb)\n      }\n    }), cb)\n  }\n}\n\nfunction toArray (list) {\n  return Array.prototype.slice.call(list || [], 0)\n}\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var list = this.map[name]\n    if (!list) {\n      list = []\n      this.map[name] = list\n    }\n    list.push(value)\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    var values = this.map[normalizeName(name)]\n    return values ? values[0] : null\n  }\n\n  Headers.prototype.getAll = function(name) {\n    return this.map[normalizeName(name)] || []\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = [normalizeValue(value)]\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    Object.getOwnPropertyNames(this.map).forEach(function(name) {\n      this.map[name].forEach(function(value) {\n        callback.call(thisArg, value, name, this)\n      }, this)\n    }, this)\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    reader.readAsArrayBuffer(blob)\n    return fileReaderReady(reader)\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    reader.readAsText(blob)\n    return fileReaderReady(reader)\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (!body) {\n        this._bodyText = ''\n      } else if (support.arrayBuffer && ArrayBuffer.prototype.isPrototypeOf(body)) {\n        // Only support ArrayBuffers for POST method.\n        // Receiving ArrayBuffers happens via Blobs, instead.\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n\n      this.text = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return readBlobAsText(this._bodyBlob)\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as text')\n        } else {\n          return Promise.resolve(this._bodyText)\n        }\n      }\n    } else {\n      this.text = function() {\n        var rejected = consumed(this)\n        return rejected ? rejected : Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n    if (Request.prototype.isPrototypeOf(input)) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = input\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this)\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function headers(xhr) {\n    var head = new Headers()\n    var pairs = (xhr.getAllResponseHeaders() || '').trim().split('\\n')\n    pairs.forEach(function(header) {\n      var split = header.trim().split(':')\n      var key = split.shift().trim()\n      var value = split.join(':').trim()\n      head.append(key, value)\n    })\n    return head\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = options.status\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = options.statusText\n    this.headers = options.headers instanceof Headers ? options.headers : new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request\n      if (Request.prototype.isPrototypeOf(input) && !init) {\n        request = input\n      } else {\n        request = new Request(input, init)\n      }\n\n      var xhr = new XMLHttpRequest()\n\n      function responseURL() {\n        if ('responseURL' in xhr) {\n          return xhr.responseURL\n        }\n\n        // Avoid security warnings on getResponseHeader when not allowed by CORS\n        if (/^X-Request-URL:/m.test(xhr.getAllResponseHeaders())) {\n          return xhr.getResponseHeader('X-Request-URL')\n        }\n\n        return\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: headers(xhr),\n          url: responseURL()\n        }\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","'use strict';\nvar numberIsNan = require('number-is-nan');\n\nmodule.exports = function (num) {\n\tif (typeof num !== 'number' || numberIsNan(num)) {\n\t\tthrow new TypeError('Expected a number, got ' + typeof num);\n\t}\n\n\tvar exponent;\n\tvar unit;\n\tvar neg = num < 0;\n\tvar units = ['B', 'kB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n\n\tif (neg) {\n\t\tnum = -num;\n\t}\n\n\tif (num < 1) {\n\t\treturn (neg ? '-' : '') + num + ' B';\n\t}\n\n\texponent = Math.min(Math.floor(Math.log(num) / Math.log(1000)), units.length - 1);\n\tnum = Number((num / Math.pow(1000, exponent)).toFixed(2));\n\tunit = units[exponent];\n\n\treturn (neg ? '-' : '') + num + ' ' + unit;\n};\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE\n * @version   3.2.1\n */\n\n(function() {\n    \"use strict\";\n    function lib$es6$promise$utils$$objectOrFunction(x) {\n      return typeof x === 'function' || (typeof x === 'object' && x !== null);\n    }\n\n    function lib$es6$promise$utils$$isFunction(x) {\n      return typeof x === 'function';\n    }\n\n    function lib$es6$promise$utils$$isMaybeThenable(x) {\n      return typeof x === 'object' && x !== null;\n    }\n\n    var lib$es6$promise$utils$$_isArray;\n    if (!Array.isArray) {\n      lib$es6$promise$utils$$_isArray = function (x) {\n        return Object.prototype.toString.call(x) === '[object Array]';\n      };\n    } else {\n      lib$es6$promise$utils$$_isArray = Array.isArray;\n    }\n\n    var lib$es6$promise$utils$$isArray = lib$es6$promise$utils$$_isArray;\n    var lib$es6$promise$asap$$len = 0;\n    var lib$es6$promise$asap$$vertxNext;\n    var lib$es6$promise$asap$$customSchedulerFn;\n\n    var lib$es6$promise$asap$$asap = function asap(callback, arg) {\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len] = callback;\n      lib$es6$promise$asap$$queue[lib$es6$promise$asap$$len + 1] = arg;\n      lib$es6$promise$asap$$len += 2;\n      if (lib$es6$promise$asap$$len === 2) {\n        // If len is 2, that means that we need to schedule an async flush.\n        // If additional callbacks are queued before the queue is flushed, they\n        // will be processed by this flush that we are scheduling.\n        if (lib$es6$promise$asap$$customSchedulerFn) {\n          lib$es6$promise$asap$$customSchedulerFn(lib$es6$promise$asap$$flush);\n        } else {\n          lib$es6$promise$asap$$scheduleFlush();\n        }\n      }\n    }\n\n    function lib$es6$promise$asap$$setScheduler(scheduleFn) {\n      lib$es6$promise$asap$$customSchedulerFn = scheduleFn;\n    }\n\n    function lib$es6$promise$asap$$setAsap(asapFn) {\n      lib$es6$promise$asap$$asap = asapFn;\n    }\n\n    var lib$es6$promise$asap$$browserWindow = (typeof window !== 'undefined') ? window : undefined;\n    var lib$es6$promise$asap$$browserGlobal = lib$es6$promise$asap$$browserWindow || {};\n    var lib$es6$promise$asap$$BrowserMutationObserver = lib$es6$promise$asap$$browserGlobal.MutationObserver || lib$es6$promise$asap$$browserGlobal.WebKitMutationObserver;\n    var lib$es6$promise$asap$$isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n    // test for web worker but not in IE10\n    var lib$es6$promise$asap$$isWorker = typeof Uint8ClampedArray !== 'undefined' &&\n      typeof importScripts !== 'undefined' &&\n      typeof MessageChannel !== 'undefined';\n\n    // node\n    function lib$es6$promise$asap$$useNextTick() {\n      // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n      // see https://github.com/cujojs/when/issues/410 for details\n      return function() {\n        process.nextTick(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    // vertx\n    function lib$es6$promise$asap$$useVertxTimer() {\n      return function() {\n        lib$es6$promise$asap$$vertxNext(lib$es6$promise$asap$$flush);\n      };\n    }\n\n    function lib$es6$promise$asap$$useMutationObserver() {\n      var iterations = 0;\n      var observer = new lib$es6$promise$asap$$BrowserMutationObserver(lib$es6$promise$asap$$flush);\n      var node = document.createTextNode('');\n      observer.observe(node, { characterData: true });\n\n      return function() {\n        node.data = (iterations = ++iterations % 2);\n      };\n    }\n\n    // web worker\n    function lib$es6$promise$asap$$useMessageChannel() {\n      var channel = new MessageChannel();\n      channel.port1.onmessage = lib$es6$promise$asap$$flush;\n      return function () {\n        channel.port2.postMessage(0);\n      };\n    }\n\n    function lib$es6$promise$asap$$useSetTimeout() {\n      return function() {\n        setTimeout(lib$es6$promise$asap$$flush, 1);\n      };\n    }\n\n    var lib$es6$promise$asap$$queue = new Array(1000);\n    function lib$es6$promise$asap$$flush() {\n      for (var i = 0; i < lib$es6$promise$asap$$len; i+=2) {\n        var callback = lib$es6$promise$asap$$queue[i];\n        var arg = lib$es6$promise$asap$$queue[i+1];\n\n        callback(arg);\n\n        lib$es6$promise$asap$$queue[i] = undefined;\n        lib$es6$promise$asap$$queue[i+1] = undefined;\n      }\n\n      lib$es6$promise$asap$$len = 0;\n    }\n\n    function lib$es6$promise$asap$$attemptVertx() {\n      try {\n        var r = require;\n        var vertx = r('vertx');\n        lib$es6$promise$asap$$vertxNext = vertx.runOnLoop || vertx.runOnContext;\n        return lib$es6$promise$asap$$useVertxTimer();\n      } catch(e) {\n        return lib$es6$promise$asap$$useSetTimeout();\n      }\n    }\n\n    var lib$es6$promise$asap$$scheduleFlush;\n    // Decide what async method to use to triggering processing of queued callbacks:\n    if (lib$es6$promise$asap$$isNode) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useNextTick();\n    } else if (lib$es6$promise$asap$$BrowserMutationObserver) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMutationObserver();\n    } else if (lib$es6$promise$asap$$isWorker) {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useMessageChannel();\n    } else if (lib$es6$promise$asap$$browserWindow === undefined && typeof require === 'function') {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$attemptVertx();\n    } else {\n      lib$es6$promise$asap$$scheduleFlush = lib$es6$promise$asap$$useSetTimeout();\n    }\n    function lib$es6$promise$then$$then(onFulfillment, onRejection) {\n      var parent = this;\n\n      var child = new this.constructor(lib$es6$promise$$internal$$noop);\n\n      if (child[lib$es6$promise$$internal$$PROMISE_ID] === undefined) {\n        lib$es6$promise$$internal$$makePromise(child);\n      }\n\n      var state = parent._state;\n\n      if (state) {\n        var callback = arguments[state - 1];\n        lib$es6$promise$asap$$asap(function(){\n          lib$es6$promise$$internal$$invokeCallback(state, child, callback, parent._result);\n        });\n      } else {\n        lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection);\n      }\n\n      return child;\n    }\n    var lib$es6$promise$then$$default = lib$es6$promise$then$$then;\n    function lib$es6$promise$promise$resolve$$resolve(object) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (object && typeof object === 'object' && object.constructor === Constructor) {\n        return object;\n      }\n\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$resolve(promise, object);\n      return promise;\n    }\n    var lib$es6$promise$promise$resolve$$default = lib$es6$promise$promise$resolve$$resolve;\n    var lib$es6$promise$$internal$$PROMISE_ID = Math.random().toString(36).substring(16);\n\n    function lib$es6$promise$$internal$$noop() {}\n\n    var lib$es6$promise$$internal$$PENDING   = void 0;\n    var lib$es6$promise$$internal$$FULFILLED = 1;\n    var lib$es6$promise$$internal$$REJECTED  = 2;\n\n    var lib$es6$promise$$internal$$GET_THEN_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$selfFulfillment() {\n      return new TypeError(\"You cannot resolve a promise with itself\");\n    }\n\n    function lib$es6$promise$$internal$$cannotReturnOwn() {\n      return new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    function lib$es6$promise$$internal$$getThen(promise) {\n      try {\n        return promise.then;\n      } catch(error) {\n        lib$es6$promise$$internal$$GET_THEN_ERROR.error = error;\n        return lib$es6$promise$$internal$$GET_THEN_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n      try {\n        then.call(value, fulfillmentHandler, rejectionHandler);\n      } catch(e) {\n        return e;\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleForeignThenable(promise, thenable, then) {\n       lib$es6$promise$asap$$asap(function(promise) {\n        var sealed = false;\n        var error = lib$es6$promise$$internal$$tryThen(then, thenable, function(value) {\n          if (sealed) { return; }\n          sealed = true;\n          if (thenable !== value) {\n            lib$es6$promise$$internal$$resolve(promise, value);\n          } else {\n            lib$es6$promise$$internal$$fulfill(promise, value);\n          }\n        }, function(reason) {\n          if (sealed) { return; }\n          sealed = true;\n\n          lib$es6$promise$$internal$$reject(promise, reason);\n        }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n        if (!sealed && error) {\n          sealed = true;\n          lib$es6$promise$$internal$$reject(promise, error);\n        }\n      }, promise);\n    }\n\n    function lib$es6$promise$$internal$$handleOwnThenable(promise, thenable) {\n      if (thenable._state === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, thenable._result);\n      } else if (thenable._state === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, thenable._result);\n      } else {\n        lib$es6$promise$$internal$$subscribe(thenable, undefined, function(value) {\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      }\n    }\n\n    function lib$es6$promise$$internal$$handleMaybeThenable(promise, maybeThenable, then) {\n      if (maybeThenable.constructor === promise.constructor &&\n          then === lib$es6$promise$then$$default &&\n          constructor.resolve === lib$es6$promise$promise$resolve$$default) {\n        lib$es6$promise$$internal$$handleOwnThenable(promise, maybeThenable);\n      } else {\n        if (then === lib$es6$promise$$internal$$GET_THEN_ERROR) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$GET_THEN_ERROR.error);\n        } else if (then === undefined) {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        } else if (lib$es6$promise$utils$$isFunction(then)) {\n          lib$es6$promise$$internal$$handleForeignThenable(promise, maybeThenable, then);\n        } else {\n          lib$es6$promise$$internal$$fulfill(promise, maybeThenable);\n        }\n      }\n    }\n\n    function lib$es6$promise$$internal$$resolve(promise, value) {\n      if (promise === value) {\n        lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$selfFulfillment());\n      } else if (lib$es6$promise$utils$$objectOrFunction(value)) {\n        lib$es6$promise$$internal$$handleMaybeThenable(promise, value, lib$es6$promise$$internal$$getThen(value));\n      } else {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publishRejection(promise) {\n      if (promise._onerror) {\n        promise._onerror(promise._result);\n      }\n\n      lib$es6$promise$$internal$$publish(promise);\n    }\n\n    function lib$es6$promise$$internal$$fulfill(promise, value) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n\n      promise._result = value;\n      promise._state = lib$es6$promise$$internal$$FULFILLED;\n\n      if (promise._subscribers.length !== 0) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, promise);\n      }\n    }\n\n    function lib$es6$promise$$internal$$reject(promise, reason) {\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) { return; }\n      promise._state = lib$es6$promise$$internal$$REJECTED;\n      promise._result = reason;\n\n      lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publishRejection, promise);\n    }\n\n    function lib$es6$promise$$internal$$subscribe(parent, child, onFulfillment, onRejection) {\n      var subscribers = parent._subscribers;\n      var length = subscribers.length;\n\n      parent._onerror = null;\n\n      subscribers[length] = child;\n      subscribers[length + lib$es6$promise$$internal$$FULFILLED] = onFulfillment;\n      subscribers[length + lib$es6$promise$$internal$$REJECTED]  = onRejection;\n\n      if (length === 0 && parent._state) {\n        lib$es6$promise$asap$$asap(lib$es6$promise$$internal$$publish, parent);\n      }\n    }\n\n    function lib$es6$promise$$internal$$publish(promise) {\n      var subscribers = promise._subscribers;\n      var settled = promise._state;\n\n      if (subscribers.length === 0) { return; }\n\n      var child, callback, detail = promise._result;\n\n      for (var i = 0; i < subscribers.length; i += 3) {\n        child = subscribers[i];\n        callback = subscribers[i + settled];\n\n        if (child) {\n          lib$es6$promise$$internal$$invokeCallback(settled, child, callback, detail);\n        } else {\n          callback(detail);\n        }\n      }\n\n      promise._subscribers.length = 0;\n    }\n\n    function lib$es6$promise$$internal$$ErrorObject() {\n      this.error = null;\n    }\n\n    var lib$es6$promise$$internal$$TRY_CATCH_ERROR = new lib$es6$promise$$internal$$ErrorObject();\n\n    function lib$es6$promise$$internal$$tryCatch(callback, detail) {\n      try {\n        return callback(detail);\n      } catch(e) {\n        lib$es6$promise$$internal$$TRY_CATCH_ERROR.error = e;\n        return lib$es6$promise$$internal$$TRY_CATCH_ERROR;\n      }\n    }\n\n    function lib$es6$promise$$internal$$invokeCallback(settled, promise, callback, detail) {\n      var hasCallback = lib$es6$promise$utils$$isFunction(callback),\n          value, error, succeeded, failed;\n\n      if (hasCallback) {\n        value = lib$es6$promise$$internal$$tryCatch(callback, detail);\n\n        if (value === lib$es6$promise$$internal$$TRY_CATCH_ERROR) {\n          failed = true;\n          error = value.error;\n          value = null;\n        } else {\n          succeeded = true;\n        }\n\n        if (promise === value) {\n          lib$es6$promise$$internal$$reject(promise, lib$es6$promise$$internal$$cannotReturnOwn());\n          return;\n        }\n\n      } else {\n        value = detail;\n        succeeded = true;\n      }\n\n      if (promise._state !== lib$es6$promise$$internal$$PENDING) {\n        // noop\n      } else if (hasCallback && succeeded) {\n        lib$es6$promise$$internal$$resolve(promise, value);\n      } else if (failed) {\n        lib$es6$promise$$internal$$reject(promise, error);\n      } else if (settled === lib$es6$promise$$internal$$FULFILLED) {\n        lib$es6$promise$$internal$$fulfill(promise, value);\n      } else if (settled === lib$es6$promise$$internal$$REJECTED) {\n        lib$es6$promise$$internal$$reject(promise, value);\n      }\n    }\n\n    function lib$es6$promise$$internal$$initializePromise(promise, resolver) {\n      try {\n        resolver(function resolvePromise(value){\n          lib$es6$promise$$internal$$resolve(promise, value);\n        }, function rejectPromise(reason) {\n          lib$es6$promise$$internal$$reject(promise, reason);\n        });\n      } catch(e) {\n        lib$es6$promise$$internal$$reject(promise, e);\n      }\n    }\n\n    var lib$es6$promise$$internal$$id = 0;\n    function lib$es6$promise$$internal$$nextId() {\n      return lib$es6$promise$$internal$$id++;\n    }\n\n    function lib$es6$promise$$internal$$makePromise(promise) {\n      promise[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$id++;\n      promise._state = undefined;\n      promise._result = undefined;\n      promise._subscribers = [];\n    }\n\n    function lib$es6$promise$promise$all$$all(entries) {\n      return new lib$es6$promise$enumerator$$default(this, entries).promise;\n    }\n    var lib$es6$promise$promise$all$$default = lib$es6$promise$promise$all$$all;\n    function lib$es6$promise$promise$race$$race(entries) {\n      /*jshint validthis:true */\n      var Constructor = this;\n\n      if (!lib$es6$promise$utils$$isArray(entries)) {\n        return new Constructor(function(resolve, reject) {\n          reject(new TypeError('You must pass an array to race.'));\n        });\n      } else {\n        return new Constructor(function(resolve, reject) {\n          var length = entries.length;\n          for (var i = 0; i < length; i++) {\n            Constructor.resolve(entries[i]).then(resolve, reject);\n          }\n        });\n      }\n    }\n    var lib$es6$promise$promise$race$$default = lib$es6$promise$promise$race$$race;\n    function lib$es6$promise$promise$reject$$reject(reason) {\n      /*jshint validthis:true */\n      var Constructor = this;\n      var promise = new Constructor(lib$es6$promise$$internal$$noop);\n      lib$es6$promise$$internal$$reject(promise, reason);\n      return promise;\n    }\n    var lib$es6$promise$promise$reject$$default = lib$es6$promise$promise$reject$$reject;\n\n\n    function lib$es6$promise$promise$$needsResolver() {\n      throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n    }\n\n    function lib$es6$promise$promise$$needsNew() {\n      throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n    }\n\n    var lib$es6$promise$promise$$default = lib$es6$promise$promise$$Promise;\n    /**\n      Promise objects represent the eventual result of an asynchronous operation. The\n      primary way of interacting with a promise is through its `then` method, which\n      registers callbacks to receive either a promise's eventual value or the reason\n      why the promise cannot be fulfilled.\n\n      Terminology\n      -----------\n\n      - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n      - `thenable` is an object or function that defines a `then` method.\n      - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n      - `exception` is a value that is thrown using the throw statement.\n      - `reason` is a value that indicates why a promise was rejected.\n      - `settled` the final resting state of a promise, fulfilled or rejected.\n\n      A promise can be in one of three states: pending, fulfilled, or rejected.\n\n      Promises that are fulfilled have a fulfillment value and are in the fulfilled\n      state.  Promises that are rejected have a rejection reason and are in the\n      rejected state.  A fulfillment value is never a thenable.\n\n      Promises can also be said to *resolve* a value.  If this value is also a\n      promise, then the original promise's settled state will match the value's\n      settled state.  So a promise that *resolves* a promise that rejects will\n      itself reject, and a promise that *resolves* a promise that fulfills will\n      itself fulfill.\n\n\n      Basic Usage:\n      ------------\n\n      ```js\n      var promise = new Promise(function(resolve, reject) {\n        // on success\n        resolve(value);\n\n        // on failure\n        reject(reason);\n      });\n\n      promise.then(function(value) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Advanced Usage:\n      ---------------\n\n      Promises shine when abstracting away asynchronous interactions such as\n      `XMLHttpRequest`s.\n\n      ```js\n      function getJSON(url) {\n        return new Promise(function(resolve, reject){\n          var xhr = new XMLHttpRequest();\n\n          xhr.open('GET', url);\n          xhr.onreadystatechange = handler;\n          xhr.responseType = 'json';\n          xhr.setRequestHeader('Accept', 'application/json');\n          xhr.send();\n\n          function handler() {\n            if (this.readyState === this.DONE) {\n              if (this.status === 200) {\n                resolve(this.response);\n              } else {\n                reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n              }\n            }\n          };\n        });\n      }\n\n      getJSON('/posts.json').then(function(json) {\n        // on fulfillment\n      }, function(reason) {\n        // on rejection\n      });\n      ```\n\n      Unlike callbacks, promises are great composable primitives.\n\n      ```js\n      Promise.all([\n        getJSON('/posts'),\n        getJSON('/comments')\n      ]).then(function(values){\n        values[0] // => postsJSON\n        values[1] // => commentsJSON\n\n        return values;\n      });\n      ```\n\n      @class Promise\n      @param {function} resolver\n      Useful for tooling.\n      @constructor\n    */\n    function lib$es6$promise$promise$$Promise(resolver) {\n      this[lib$es6$promise$$internal$$PROMISE_ID] = lib$es6$promise$$internal$$nextId();\n      this._result = this._state = undefined;\n      this._subscribers = [];\n\n      if (lib$es6$promise$$internal$$noop !== resolver) {\n        typeof resolver !== 'function' && lib$es6$promise$promise$$needsResolver();\n        this instanceof lib$es6$promise$promise$$Promise ? lib$es6$promise$$internal$$initializePromise(this, resolver) : lib$es6$promise$promise$$needsNew();\n      }\n    }\n\n    lib$es6$promise$promise$$Promise.all = lib$es6$promise$promise$all$$default;\n    lib$es6$promise$promise$$Promise.race = lib$es6$promise$promise$race$$default;\n    lib$es6$promise$promise$$Promise.resolve = lib$es6$promise$promise$resolve$$default;\n    lib$es6$promise$promise$$Promise.reject = lib$es6$promise$promise$reject$$default;\n    lib$es6$promise$promise$$Promise._setScheduler = lib$es6$promise$asap$$setScheduler;\n    lib$es6$promise$promise$$Promise._setAsap = lib$es6$promise$asap$$setAsap;\n    lib$es6$promise$promise$$Promise._asap = lib$es6$promise$asap$$asap;\n\n    lib$es6$promise$promise$$Promise.prototype = {\n      constructor: lib$es6$promise$promise$$Promise,\n\n    /**\n      The primary way of interacting with a promise is through its `then` method,\n      which registers callbacks to receive either a promise's eventual value or the\n      reason why the promise cannot be fulfilled.\n\n      ```js\n      findUser().then(function(user){\n        // user is available\n      }, function(reason){\n        // user is unavailable, and you are given the reason why\n      });\n      ```\n\n      Chaining\n      --------\n\n      The return value of `then` is itself a promise.  This second, 'downstream'\n      promise is resolved with the return value of the first promise's fulfillment\n      or rejection handler, or rejected if the handler throws an exception.\n\n      ```js\n      findUser().then(function (user) {\n        return user.name;\n      }, function (reason) {\n        return 'default name';\n      }).then(function (userName) {\n        // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n        // will be `'default name'`\n      });\n\n      findUser().then(function (user) {\n        throw new Error('Found user, but still unhappy');\n      }, function (reason) {\n        throw new Error('`findUser` rejected and we're unhappy');\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n        // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n      });\n      ```\n      If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n\n      ```js\n      findUser().then(function (user) {\n        throw new PedagogicalException('Upstream error');\n      }).then(function (value) {\n        // never reached\n      }).then(function (value) {\n        // never reached\n      }, function (reason) {\n        // The `PedgagocialException` is propagated all the way down to here\n      });\n      ```\n\n      Assimilation\n      ------------\n\n      Sometimes the value you want to propagate to a downstream promise can only be\n      retrieved asynchronously. This can be achieved by returning a promise in the\n      fulfillment or rejection handler. The downstream promise will then be pending\n      until the returned promise is settled. This is called *assimilation*.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // The user's comments are now available\n      });\n      ```\n\n      If the assimliated promise rejects, then the downstream promise will also reject.\n\n      ```js\n      findUser().then(function (user) {\n        return findCommentsByAuthor(user);\n      }).then(function (comments) {\n        // If `findCommentsByAuthor` fulfills, we'll have the value here\n      }, function (reason) {\n        // If `findCommentsByAuthor` rejects, we'll have the reason here\n      });\n      ```\n\n      Simple Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var result;\n\n      try {\n        result = findResult();\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n      findResult(function(result, err){\n        if (err) {\n          // failure\n        } else {\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findResult().then(function(result){\n        // success\n      }, function(reason){\n        // failure\n      });\n      ```\n\n      Advanced Example\n      --------------\n\n      Synchronous Example\n\n      ```javascript\n      var author, books;\n\n      try {\n        author = findAuthor();\n        books  = findBooksByAuthor(author);\n        // success\n      } catch(reason) {\n        // failure\n      }\n      ```\n\n      Errback Example\n\n      ```js\n\n      function foundBooks(books) {\n\n      }\n\n      function failure(reason) {\n\n      }\n\n      findAuthor(function(author, err){\n        if (err) {\n          failure(err);\n          // failure\n        } else {\n          try {\n            findBoooksByAuthor(author, function(books, err) {\n              if (err) {\n                failure(err);\n              } else {\n                try {\n                  foundBooks(books);\n                } catch(reason) {\n                  failure(reason);\n                }\n              }\n            });\n          } catch(error) {\n            failure(err);\n          }\n          // success\n        }\n      });\n      ```\n\n      Promise Example;\n\n      ```javascript\n      findAuthor().\n        then(findBooksByAuthor).\n        then(function(books){\n          // found books\n      }).catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method then\n      @param {Function} onFulfilled\n      @param {Function} onRejected\n      Useful for tooling.\n      @return {Promise}\n    */\n      then: lib$es6$promise$then$$default,\n\n    /**\n      `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n      as the catch block of a try/catch statement.\n\n      ```js\n      function findAuthor(){\n        throw new Error('couldn't find that author');\n      }\n\n      // synchronous\n      try {\n        findAuthor();\n      } catch(reason) {\n        // something went wrong\n      }\n\n      // async with promises\n      findAuthor().catch(function(reason){\n        // something went wrong\n      });\n      ```\n\n      @method catch\n      @param {Function} onRejection\n      Useful for tooling.\n      @return {Promise}\n    */\n      'catch': function(onRejection) {\n        return this.then(null, onRejection);\n      }\n    };\n    var lib$es6$promise$enumerator$$default = lib$es6$promise$enumerator$$Enumerator;\n    function lib$es6$promise$enumerator$$Enumerator(Constructor, input) {\n      this._instanceConstructor = Constructor;\n      this.promise = new Constructor(lib$es6$promise$$internal$$noop);\n\n      if (!this.promise[lib$es6$promise$$internal$$PROMISE_ID]) {\n        lib$es6$promise$$internal$$makePromise(this.promise);\n      }\n\n      if (lib$es6$promise$utils$$isArray(input)) {\n        this._input     = input;\n        this.length     = input.length;\n        this._remaining = input.length;\n\n        this._result = new Array(this.length);\n\n        if (this.length === 0) {\n          lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n        } else {\n          this.length = this.length || 0;\n          this._enumerate();\n          if (this._remaining === 0) {\n            lib$es6$promise$$internal$$fulfill(this.promise, this._result);\n          }\n        }\n      } else {\n        lib$es6$promise$$internal$$reject(this.promise, lib$es6$promise$enumerator$$validationError());\n      }\n    }\n\n    function lib$es6$promise$enumerator$$validationError() {\n      return new Error('Array Methods must be provided an Array');\n    }\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._enumerate = function() {\n      var length  = this.length;\n      var input   = this._input;\n\n      for (var i = 0; this._state === lib$es6$promise$$internal$$PENDING && i < length; i++) {\n        this._eachEntry(input[i], i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._eachEntry = function(entry, i) {\n      var c = this._instanceConstructor;\n      var resolve = c.resolve;\n\n      if (resolve === lib$es6$promise$promise$resolve$$default) {\n        var then = lib$es6$promise$$internal$$getThen(entry);\n\n        if (then === lib$es6$promise$then$$default &&\n            entry._state !== lib$es6$promise$$internal$$PENDING) {\n          this._settledAt(entry._state, i, entry._result);\n        } else if (typeof then !== 'function') {\n          this._remaining--;\n          this._result[i] = entry;\n        } else if (c === lib$es6$promise$promise$$default) {\n          var promise = new c(lib$es6$promise$$internal$$noop);\n          lib$es6$promise$$internal$$handleMaybeThenable(promise, entry, then);\n          this._willSettleAt(promise, i);\n        } else {\n          this._willSettleAt(new c(function(resolve) { resolve(entry); }), i);\n        }\n      } else {\n        this._willSettleAt(resolve(entry), i);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._settledAt = function(state, i, value) {\n      var promise = this.promise;\n\n      if (promise._state === lib$es6$promise$$internal$$PENDING) {\n        this._remaining--;\n\n        if (state === lib$es6$promise$$internal$$REJECTED) {\n          lib$es6$promise$$internal$$reject(promise, value);\n        } else {\n          this._result[i] = value;\n        }\n      }\n\n      if (this._remaining === 0) {\n        lib$es6$promise$$internal$$fulfill(promise, this._result);\n      }\n    };\n\n    lib$es6$promise$enumerator$$Enumerator.prototype._willSettleAt = function(promise, i) {\n      var enumerator = this;\n\n      lib$es6$promise$$internal$$subscribe(promise, undefined, function(value) {\n        enumerator._settledAt(lib$es6$promise$$internal$$FULFILLED, i, value);\n      }, function(reason) {\n        enumerator._settledAt(lib$es6$promise$$internal$$REJECTED, i, reason);\n      });\n    };\n    function lib$es6$promise$polyfill$$polyfill() {\n      var local;\n\n      if (typeof global !== 'undefined') {\n          local = global;\n      } else if (typeof self !== 'undefined') {\n          local = self;\n      } else {\n          try {\n              local = Function('return this')();\n          } catch (e) {\n              throw new Error('polyfill failed because global object is unavailable in this environment');\n          }\n      }\n\n      var P = local.Promise;\n\n      if (P && Object.prototype.toString.call(P.resolve()) === '[object Promise]' && !P.cast) {\n        return;\n      }\n\n      local.Promise = lib$es6$promise$promise$$default;\n    }\n    var lib$es6$promise$polyfill$$default = lib$es6$promise$polyfill$$polyfill;\n\n    var lib$es6$promise$umd$$ES6Promise = {\n      'Promise': lib$es6$promise$promise$$default,\n      'polyfill': lib$es6$promise$polyfill$$default\n    };\n\n    /* global define:true module:true window: true */\n    if (typeof define === 'function' && define['amd']) {\n      define(function() { return lib$es6$promise$umd$$ES6Promise; });\n    } else if (typeof module !== 'undefined' && module['exports']) {\n      module['exports'] = lib$es6$promise$umd$$ES6Promise;\n    } else if (typeof this !== 'undefined') {\n      this['ES6Promise'] = lib$es6$promise$umd$$ES6Promise;\n    }\n\n    lib$es6$promise$polyfill$$default();\n}).call(this);\n\n","\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\n/* global window */\n\nvar Upload = _interopRequire(require(\"./upload\"));\n\nvar defaultOptions = Upload.defaultOptions;\nvar XMLHttpRequest = window.XMLHttpRequest;\nvar localStorage = window.localStorage;\nvar Blob = window.Blob;\n\nvar isSupported = XMLHttpRequest && localStorage && Blob && typeof Blob.prototype.slice === \"function\";\n\n// The usage of the commonjs exporting syntax instead of the new ECMAScript\n// one is actually inteded and prevents weird behaviour if we are trying to\n// import this module in another module using Babel.\nmodule.exports = {\n  Upload: Upload,\n  isSupported: isSupported,\n  defaultOptions: defaultOptions\n};","import html from 'yo-yo'\nimport { fileIcon, checkIcon, removeIcon } from './icons'\n\nexport default function fileItem (bus, file) {\n  const isUploaded = file.progress === 100\n  const uploadInProgress = file.progress > 0 && file.progress < 100\n\n  const remove = (ev) => {\n    bus.emit('file-remove', file.id)\n  }\n\n  return html`<li class=\"UppyDashboardItem\"\n                  id=\"${file.id}\"\n                  title=\"${file.name}\">\n    <div class=\"UppyDashboardItem-icon\">\n      ${file.type.general === 'image' ? file.previewEl : fileIcon(file.type)}\n    </div>\n    <h4 class=\"UppyDashboardItem-name\">\n      ${file.uploadURL\n        ? html`<a href=\"${file.uploadURL}\" target=\"_blank\">${file.name}</a>`\n        : html`<span>${file.name}</span>`\n      }\n      <br>\n    </h4>\n    <div class=\"UppyDashboardItem-status\">\n      <div class=\"UppyDashboardItem-statusSize\">${file.totalSize}</div>\n      ${uploadInProgress ? 'Uploading ' + file.progress + '%' : ''}\n      ${isUploaded ? 'Completed' : ''}\n    </div>\n    <div class=\"UppyDashboardItem-action\">\n      ${isUploaded\n        ? checkIcon()\n        : html`<button class=\"UppyDashboardItem-remove\"\n                       aria-label=\"Remove this file\"\n                       onclick=${remove}>\n                  ${removeIcon()}\n               </button>`\n      }\n    </div>\n    <div class=\"UppyDashboardItem-progress ${uploadInProgress ? 'is-active' : ''}\">\n      <div class=\"UppyDashboardItem-progressInner\" style=\"width: ${file.progress}%\"></div>\n    </div>\n  </li>`\n}\n","module.exports = [\n  // attribute events (can be set with attributes)\n  'onclick',\n  'ondblclick',\n  'onmousedown',\n  'onmouseup',\n  'onmouseover',\n  'onmousemove',\n  'onmouseout',\n  'ondragstart',\n  'ondrag',\n  'ondragenter',\n  'ondragleave',\n  'ondragover',\n  'ondrop',\n  'ondragend',\n  'onkeydown',\n  'onkeypress',\n  'onkeyup',\n  'onunload',\n  'onabort',\n  'onerror',\n  'onresize',\n  'onscroll',\n  'onselect',\n  'onchange',\n  'onsubmit',\n  'onreset',\n  'onfocus',\n  'onblur',\n  'oninput',\n  // other common events\n  'oncontextmenu',\n  'onfocusin',\n  'onfocusout'\n]\n","\"use strict\";\n\nvar _interopRequire = function (obj) { return obj && obj.__esModule ? obj[\"default\"] : obj; };\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var key in props) { var prop = props[key]; prop.configurable = true; if (prop.value) prop.writable = true; } Object.defineProperties(target, props); } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nvar _classCallCheck = function (instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } };\n\n/* global window, XMLHttpRequest */\n\nvar fingerprint = _interopRequire(require(\"./fingerprint\"));\n\nvar extend = _interopRequire(require(\"extend\"));\n\nvar localStorage = window.localStorage;\nvar btoa = window.btoa;\n\nvar defaultOptions = {\n  endpoint: \"\",\n  fingerprint: fingerprint,\n  resume: true,\n  onProgress: null,\n  onChunkComplete: null,\n  onSuccess: null,\n  onError: null,\n  headers: {},\n  chunkSize: Infinity,\n  withCredentials: false\n};\n\nvar Upload = (function () {\n  function Upload(file, options) {\n    _classCallCheck(this, Upload);\n\n    this.options = extend(true, {}, defaultOptions, options);\n\n    // The underlying File/Blob object\n    this.file = file;\n\n    // The URL against which the file will be uploaded\n    this.url = null;\n\n    // The underlying XHR object for the current PATCH request\n    this._xhr = null;\n\n    // The fingerpinrt for the current file (set after start())\n    this._fingerprint = null;\n\n    // The offset used in the current PATCH request\n    this._offset = null;\n\n    // True if the current PATCH request has been aborted\n    this._aborted = false;\n  }\n\n  _createClass(Upload, {\n    start: {\n      value: function start() {\n        var file = this.file;\n\n        if (!file) {\n          this._emitError(new Error(\"tus: no file to upload provided\"));\n          return;\n        }\n\n        if (!this.options.endpoint) {\n          this._emitError(new Error(\"tus: no endpoint provided\"));\n          return;\n        }\n\n        // A URL has manually been specified, so we try to resume\n        if (this.url !== null) {\n          this._resumeUpload();\n          return;\n        }\n\n        // Try to find the endpoint for the file in the localStorage\n        if (this.options.resume) {\n          this._fingerprint = this.options.fingerprint(file);\n          var resumedUrl = localStorage.getItem(this._fingerprint);\n\n          if (resumedUrl != null) {\n            this.url = resumedUrl;\n            this._resumeUpload();\n            return;\n          }\n        }\n\n        // An upload has not started for the file yet, so we start a new one\n        this._createUpload();\n      }\n    },\n    abort: {\n      value: function abort() {\n        if (this._xhr !== null) {\n          this._xhr.abort();\n          this._aborted = true;\n        }\n      }\n    },\n    _emitXhrError: {\n      value: function _emitXhrError(xhr, err) {\n        err.originalRequest = xhr;\n        this._emitError(err);\n      }\n    },\n    _emitError: {\n      value: function _emitError(err) {\n        if (typeof this.options.onError === \"function\") {\n          this.options.onError(err);\n        } else {\n          throw err;\n        }\n      }\n    },\n    _emitSuccess: {\n      value: function _emitSuccess() {\n        if (typeof this.options.onSuccess === \"function\") {\n          this.options.onSuccess();\n        }\n      }\n    },\n    _emitProgress: {\n\n      /**\n       * Publishes notification when data has been sent to the server. This\n       * data may not have been accepted by the server yet.\n       * @param  {number} bytesSent  Number of bytes sent to the server.\n       * @param  {number} bytesTotal Total number of bytes to be sent to the server.\n       */\n\n      value: function _emitProgress(bytesSent, bytesTotal) {\n        if (typeof this.options.onProgress === \"function\") {\n          this.options.onProgress(bytesSent, bytesTotal);\n        }\n      }\n    },\n    _emitChunkComplete: {\n\n      /**\n       * Publishes notification when a chunk of data has been sent to the server\n       * and accepted by the server.\n       * @param  {number} chunkSize  Size of the chunk that was accepted by the\n       *                             server.\n       * @param  {number} bytesAccepted Total number of bytes that have been\n       *                                accepted by the server.\n       * @param  {number} bytesTotal Total number of bytes to be sent to the server.\n       */\n\n      value: function _emitChunkComplete(chunkSize, bytesAccepted, bytesTotal) {\n        if (typeof this.options.onChunkComplete === \"function\") {\n          this.options.onChunkComplete(chunkSize, bytesAccepted, bytesTotal);\n        }\n      }\n    },\n    _setupXHR: {\n\n      /**\n       * Set the headers used in the request and the withCredentials property\n       * as defined in the options\n       *\n       * @param {XMLHttpRequest} xhr\n       */\n\n      value: function _setupXHR(xhr) {\n        xhr.setRequestHeader(\"Tus-Resumable\", \"1.0.0\");\n        var headers = this.options.headers;\n\n        for (var _name in headers) {\n          xhr.setRequestHeader(_name, headers[_name]);\n        }\n\n        xhr.withCredentials = this.options.withCredentials;\n      }\n    },\n    _createUpload: {\n\n      /**\n       * Create a new upload using the creation extension by sending a POST\n       * request to the endpoint. After successful creation the file will be\n       * uploaded\n       *\n       * @api private\n       */\n\n      value: function _createUpload() {\n        var _this = this;\n\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"POST\", this.options.endpoint, true);\n\n        xhr.onload = function () {\n          if (!(xhr.status >= 200 && xhr.status < 300)) {\n            _this._emitXhrError(xhr, new Error(\"tus: unexpected response while creating upload\"));\n            return;\n          }\n\n          _this.url = xhr.getResponseHeader(\"Location\");\n\n          if (_this.options.resume) {\n            localStorage.setItem(_this._fingerprint, _this.url);\n          }\n\n          _this._offset = 0;\n          _this._startUpload();\n        };\n\n        xhr.onerror = function () {\n          _this._emitXhrError(xhr, new Error(\"tus: failed to create upload\"));\n        };\n\n        this._setupXHR(xhr);\n        xhr.setRequestHeader(\"Upload-Length\", this.file.size);\n\n        // Add metadata if values have been added\n        var metadata = encodeMetadata(this.options.metadata);\n        if (metadata !== \"\") {\n          xhr.setRequestHeader(\"Upload-Metadata\", metadata);\n        }\n\n        xhr.send(null);\n      }\n    },\n    _resumeUpload: {\n\n      /*\n       * Try to resume an existing upload. First a HEAD request will be sent\n       * to retrieve the offset. If the request fails a new upload will be\n       * created. In the case of a successful response the file will be uploaded.\n       *\n       * @api private\n       */\n\n      value: function _resumeUpload() {\n        var _this = this;\n\n        var xhr = new XMLHttpRequest();\n        xhr.open(\"HEAD\", this.url, true);\n\n        xhr.onload = function () {\n          if (!(xhr.status >= 200 && xhr.status < 300)) {\n            if (_this.options.resume) {\n              // Remove stored fingerprint and corresponding endpoint,\n              // since the file can not be found\n              localStorage.removeItem(_this._fingerprint);\n            }\n\n            // Try to create a new upload\n            _this.url = null;\n            _this._createUpload();\n            return;\n          }\n\n          var offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\n          if (isNaN(offset)) {\n            _this._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\n            return;\n          }\n\n          _this._offset = offset;\n          _this._startUpload();\n        };\n\n        xhr.onerror = function () {\n          _this._emitXhrError(xhr, new Error(\"tus: failed to resume upload\"));\n        };\n\n        this._setupXHR(xhr);\n        xhr.send(null);\n      }\n    },\n    _startUpload: {\n\n      /**\n       * Start uploading the file using PATCH requests. The file will be divided\n       * into chunks as specified in the chunkSize option. During the upload\n       * the onProgress event handler may be invoked multiple times.\n       *\n       * @api private\n       */\n\n      value: function _startUpload() {\n        var _this = this;\n\n        var xhr = this._xhr = new XMLHttpRequest();\n        xhr.open(\"PATCH\", this.url, true);\n\n        xhr.onload = function () {\n          if (!(xhr.status >= 200 && xhr.status < 300)) {\n            _this._emitXhrError(xhr, new Error(\"tus: unexpected response while creating upload\"));\n            return;\n          }\n\n          var offset = parseInt(xhr.getResponseHeader(\"Upload-Offset\"), 10);\n          if (isNaN(offset)) {\n            _this._emitXhrError(xhr, new Error(\"tus: invalid or missing offset value\"));\n            return;\n          }\n\n          _this._emitChunkComplete(offset - _this._offset, offset, _this.file.size);\n\n          _this._offset = offset;\n\n          if (offset == _this.file.size) {\n            // Yay, finally done :)\n            // Emit a last progress event\n            _this._emitProgress(offset, offset);\n            _this._emitSuccess();\n            return;\n          }\n\n          _this._startUpload();\n        };\n\n        xhr.onerror = function () {\n          // Don't emit an error if the upload was aborted manually\n          if (_this._aborted) {\n            return;\n          }\n\n          _this._emitXhrError(xhr, new Error(\"tus: failed to upload chunk at offset \" + _this._offset));\n        };\n\n        // Test support for progress events before attaching an event listener\n        if (\"upload\" in xhr) {\n          xhr.upload.onprogress = function (e) {\n            if (!e.lengthComputable) {\n              return;\n            }\n\n            _this._emitProgress(start + e.loaded, _this.file.size);\n          };\n        }\n\n        this._setupXHR(xhr);\n\n        xhr.setRequestHeader(\"Upload-Offset\", this._offset);\n        xhr.setRequestHeader(\"Content-Type\", \"application/offset+octet-stream\");\n\n        var start = this._offset;\n        var end = this._offset + this.options.chunkSize;\n\n        if (end === Infinity) {\n          end = this.file.size;\n        }\n\n        xhr.send(this.file.slice(start, end));\n      }\n    }\n  });\n\n  return Upload;\n})();\n\nfunction encodeMetadata(metadata) {\n  if (!(\"btoa\" in window)) {\n    return \"\";\n  }\n\n  var encoded = [];\n\n  for (var key in metadata) {\n    encoded.push(key + \" \" + btoa(unescape(encodeURIComponent(metadata[key]))));\n  }\n\n  return encoded.join(\",\");\n}\n\nUpload.defaultOptions = defaultOptions;\n\nmodule.exports = Upload;","// shim for using process in browser\n\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\n(function () {\n  try {\n    cachedSetTimeout = setTimeout;\n  } catch (e) {\n    cachedSetTimeout = function () {\n      throw new Error('setTimeout is not defined');\n    }\n  }\n  try {\n    cachedClearTimeout = clearTimeout;\n  } catch (e) {\n    cachedClearTimeout = function () {\n      throw new Error('clearTimeout is not defined');\n    }\n  }\n} ())\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = cachedSetTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    cachedClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        cachedSetTimeout(drainQueue, 0);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var document = require('global/document')\nvar hyperx = require('hyperx')\nvar onload = require('on-load')\n\nvar SVGNS = 'http://www.w3.org/2000/svg'\nvar BOOL_PROPS = {\n  autofocus: 1,\n  checked: 1,\n  defaultchecked: 1,\n  disabled: 1,\n  formnovalidate: 1,\n  indeterminate: 1,\n  readonly: 1,\n  required: 1,\n  selected: 1,\n  willvalidate: 1\n}\nvar SVG_TAGS = [\n  'svg',\n  'altGlyph', 'altGlyphDef', 'altGlyphItem', 'animate', 'animateColor',\n  'animateMotion', 'animateTransform', 'circle', 'clipPath', 'color-profile',\n  'cursor', 'defs', 'desc', 'ellipse', 'feBlend', 'feColorMatrix',\n  'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting',\n  'feDisplacementMap', 'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB',\n  'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode',\n  'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting',\n  'feSpotLight', 'feTile', 'feTurbulence', 'filter', 'font', 'font-face',\n  'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri',\n  'foreignObject', 'g', 'glyph', 'glyphRef', 'hkern', 'image', 'line',\n  'linearGradient', 'marker', 'mask', 'metadata', 'missing-glyph', 'mpath',\n  'path', 'pattern', 'polygon', 'polyline', 'radialGradient', 'rect',\n  'set', 'stop', 'switch', 'symbol', 'text', 'textPath', 'title', 'tref',\n  'tspan', 'use', 'view', 'vkern'\n]\n\nfunction belCreateElement (tag, props, children) {\n  var el\n\n  // If an svg tag, it needs a namespace\n  if (SVG_TAGS.indexOf(tag) !== -1) {\n    props.namespace = SVGNS\n  }\n\n  // If we are using a namespace\n  var ns = false\n  if (props.namespace) {\n    ns = props.namespace\n    delete props.namespace\n  }\n\n  // Create the element\n  if (ns) {\n    el = document.createElementNS(ns, tag)\n  } else {\n    el = document.createElement(tag)\n  }\n\n  // If adding onload events\n  if (props.onload || props.onunload) {\n    var load = props.onload || function () {}\n    var unload = props.onunload || function () {}\n    onload(el, function bel_onload () {\n      load(el)\n    }, function bel_onunload () {\n      unload(el)\n    },\n    // We have to use non-standard `caller` to find who invokes `belCreateElement`\n    belCreateElement.caller.caller.caller)\n    delete props.onload\n    delete props.onunload\n  }\n\n  // Create the properties\n  for (var p in props) {\n    if (props.hasOwnProperty(p)) {\n      var key = p.toLowerCase()\n      var val = props[p]\n      // Normalize className\n      if (key === 'classname') {\n        key = 'class'\n        p = 'class'\n      }\n      // The for attribute gets transformed to htmlFor, but we just set as for\n      if (p === 'htmlFor') {\n        p = 'for'\n      }\n      // If a property is boolean, set itself to the key\n      if (BOOL_PROPS[key]) {\n        if (val === 'true') val = key\n        else if (val === 'false') continue\n      }\n      // If a property prefers being set directly vs setAttribute\n      if (key.slice(0, 2) === 'on') {\n        el[p] = val\n      } else {\n        if (ns) {\n          el.setAttributeNS(null, p, val)\n        } else {\n          el.setAttribute(p, val)\n        }\n      }\n    }\n  }\n\n  function appendChild (childs) {\n    if (!Array.isArray(childs)) return\n    for (var i = 0; i < childs.length; i++) {\n      var node = childs[i]\n      if (Array.isArray(node)) {\n        appendChild(node)\n        continue\n      }\n\n      if (typeof node === 'number' ||\n        typeof node === 'boolean' ||\n        node instanceof Date ||\n        node instanceof RegExp) {\n        node = node.toString()\n      }\n\n      if (typeof node === 'string') {\n        if (el.lastChild && el.lastChild.nodeName === '#text') {\n          el.lastChild.nodeValue += node\n          continue\n        }\n        node = document.createTextNode(node)\n      }\n\n      if (node && node.nodeType) {\n        el.appendChild(node)\n      }\n    }\n  }\n  appendChild(children)\n\n  return el\n}\n\nmodule.exports = hyperx(belCreateElement)\nmodule.exports.createElement = belCreateElement\n","module.exports = function flatten(list, depth) {\n  depth = (typeof depth == 'number') ? depth : Infinity;\n\n  if (!depth) {\n    if (Array.isArray(list)) {\n      return list.map(function(i) { return i; });\n    }\n    return list;\n  }\n\n  return _flatten(list, 1);\n\n  function _flatten(list, d) {\n    return list.reduce(function (acc, item) {\n      if (Array.isArray(item) && d < depth) {\n        return acc.concat(_flatten(item, d + 1));\n      }\n      else {\n        return acc.concat(item);\n      }\n    }, []);\n  }\n};\n","module.exports = function (tasks, cb) {\n  var results, pending, keys\n  var isSync = true\n\n  if (Array.isArray(tasks)) {\n    results = []\n    pending = tasks.length\n  } else {\n    keys = Object.keys(tasks)\n    results = {}\n    pending = keys.length\n  }\n\n  function done (err) {\n    function end () {\n      if (cb) cb(err, results)\n      cb = null\n    }\n    if (isSync) process.nextTick(end)\n    else end()\n  }\n\n  function each (i, err, result) {\n    results[i] = result\n    if (--pending === 0 || err) {\n      done(err)\n    }\n  }\n\n  if (!pending) {\n    // empty\n    done(null)\n  } else if (keys) {\n    // object\n    keys.forEach(function (key) {\n      tasks[key](function (err, result) { each(key, err, result) })\n    })\n  } else {\n    // array\n    tasks.forEach(function (task, i) {\n      task(function (err, result) { each(i, err, result) })\n    })\n  }\n\n  isSync = false\n}\n","// Create a range object for efficently rendering strings to elements.\nvar range;\n\nvar testEl = (typeof document !== 'undefined') ?\n    document.body || document.createElement('div') :\n    {};\n\nvar XHTML = 'http://www.w3.org/1999/xhtml';\nvar ELEMENT_NODE = 1;\nvar TEXT_NODE = 3;\nvar COMMENT_NODE = 8;\n\n// Fixes <https://github.com/patrick-steele-idem/morphdom/issues/32>\n// (IE7+ support) <=IE7 does not support el.hasAttribute(name)\nvar hasAttributeNS;\n\nif (testEl.hasAttributeNS) {\n    hasAttributeNS = function(el, namespaceURI, name) {\n        return el.hasAttributeNS(namespaceURI, name);\n    };\n} else if (testEl.hasAttribute) {\n    hasAttributeNS = function(el, namespaceURI, name) {\n        return el.hasAttribute(name);\n    };\n} else {\n    hasAttributeNS = function(el, namespaceURI, name) {\n        return !!el.getAttributeNode(name);\n    };\n}\n\nfunction empty(o) {\n    for (var k in o) {\n        if (o.hasOwnProperty(k)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction toElement(str) {\n    if (!range && document.createRange) {\n        range = document.createRange();\n        range.selectNode(document.body);\n    }\n\n    var fragment;\n    if (range && range.createContextualFragment) {\n        fragment = range.createContextualFragment(str);\n    } else {\n        fragment = document.createElement('body');\n        fragment.innerHTML = str;\n    }\n    return fragment.childNodes[0];\n}\n\nvar specialElHandlers = {\n    /**\n     * Needed for IE. Apparently IE doesn't think that \"selected\" is an\n     * attribute when reading over the attributes using selectEl.attributes\n     */\n    OPTION: function(fromEl, toEl) {\n        fromEl.selected = toEl.selected;\n        if (fromEl.selected) {\n            fromEl.setAttribute('selected', '');\n        } else {\n            fromEl.removeAttribute('selected', '');\n        }\n    },\n    /**\n     * The \"value\" attribute is special for the <input> element since it sets\n     * the initial value. Changing the \"value\" attribute without changing the\n     * \"value\" property will have no effect since it is only used to the set the\n     * initial value.  Similar for the \"checked\" attribute, and \"disabled\".\n     */\n    INPUT: function(fromEl, toEl) {\n        fromEl.checked = toEl.checked;\n        if (fromEl.checked) {\n            fromEl.setAttribute('checked', '');\n        } else {\n            fromEl.removeAttribute('checked');\n        }\n\n        if (fromEl.value !== toEl.value) {\n            fromEl.value = toEl.value;\n        }\n\n        if (!hasAttributeNS(toEl, null, 'value')) {\n            fromEl.removeAttribute('value');\n        }\n\n        fromEl.disabled = toEl.disabled;\n        if (fromEl.disabled) {\n            fromEl.setAttribute('disabled', '');\n        } else {\n            fromEl.removeAttribute('disabled');\n        }\n    },\n\n    TEXTAREA: function(fromEl, toEl) {\n        var newValue = toEl.value;\n        if (fromEl.value !== newValue) {\n            fromEl.value = newValue;\n        }\n\n        if (fromEl.firstChild) {\n            fromEl.firstChild.nodeValue = newValue;\n        }\n    }\n};\n\nfunction noop() {}\n\n/**\n * Returns true if two node's names and namespace URIs are the same.\n *\n * @param {Element} a\n * @param {Element} b\n * @return {boolean}\n */\nvar compareNodeNames = function(a, b) {\n    return a.nodeName === b.nodeName &&\n           a.namespaceURI === b.namespaceURI;\n};\n\n/**\n * Create an element, optionally with a known namespace URI.\n *\n * @param {string} name the element name, e.g. 'div' or 'svg'\n * @param {string} [namespaceURI] the element's namespace URI, i.e. the value of\n * its `xmlns` attribute or its inferred namespace.\n *\n * @return {Element}\n */\nfunction createElementNS(name, namespaceURI) {\n    return !namespaceURI || namespaceURI === XHTML ?\n        document.createElement(name) :\n        document.createElementNS(namespaceURI, name);\n}\n\n/**\n * Loop over all of the attributes on the target node and make sure the original\n * DOM node has the same attributes. If an attribute found on the original node\n * is not on the new node then remove it from the original node.\n *\n * @param  {Element} fromNode\n * @param  {Element} toNode\n */\nfunction morphAttrs(fromNode, toNode) {\n    var attrs = toNode.attributes;\n    var i;\n    var attr;\n    var attrName;\n    var attrNamespaceURI;\n    var attrValue;\n    var fromValue;\n\n    for (i = attrs.length - 1; i >= 0; i--) {\n        attr = attrs[i];\n        attrName = attr.name;\n        attrValue = attr.value;\n        attrNamespaceURI = attr.namespaceURI;\n\n        if (attrNamespaceURI) {\n            attrName = attr.localName || attrName;\n            fromValue = fromNode.getAttributeNS(attrNamespaceURI, attrName);\n        } else {\n            fromValue = fromNode.getAttribute(attrName);\n        }\n\n        if (fromValue !== attrValue) {\n            if (attrNamespaceURI) {\n                fromNode.setAttributeNS(attrNamespaceURI, attrName, attrValue);\n            } else {\n                fromNode.setAttribute(attrName, attrValue);\n            }\n        }\n    }\n\n    // Remove any extra attributes found on the original DOM element that\n    // weren't found on the target element.\n    attrs = fromNode.attributes;\n\n    for (i = attrs.length - 1; i >= 0; i--) {\n        attr = attrs[i];\n        if (attr.specified !== false) {\n            attrName = attr.name;\n            attrNamespaceURI = attr.namespaceURI;\n\n            if (!hasAttributeNS(toNode, attrNamespaceURI, attrNamespaceURI ? attrName = attr.localName || attrName : attrName)) {\n                if (attrNamespaceURI) {\n                    fromNode.removeAttributeNS(attrNamespaceURI, attr.localName);\n                } else {\n                    fromNode.removeAttribute(attrName);\n                }\n            }\n        }\n    }\n}\n\n/**\n * Copies the children of one DOM element to another DOM element\n */\nfunction moveChildren(fromEl, toEl) {\n    var curChild = fromEl.firstChild;\n    while (curChild) {\n        var nextChild = curChild.nextSibling;\n        toEl.appendChild(curChild);\n        curChild = nextChild;\n    }\n    return toEl;\n}\n\nfunction defaultGetNodeKey(node) {\n    return node.id;\n}\n\nfunction morphdom(fromNode, toNode, options) {\n    if (!options) {\n        options = {};\n    }\n\n    if (typeof toNode === 'string') {\n        if (fromNode.nodeName === '#document' || fromNode.nodeName === 'HTML') {\n            var toNodeHtml = toNode;\n            toNode = document.createElement('html');\n            toNode.innerHTML = toNodeHtml;\n        } else {\n            toNode = toElement(toNode);\n        }\n    }\n\n    // XXX optimization: if the nodes are equal, don't morph them\n    /*\n    if (fromNode.isEqualNode(toNode)) {\n      return fromNode;\n    }\n    */\n\n    var savedEls = {}; // Used to save off DOM elements with IDs\n    var unmatchedEls = {};\n    var getNodeKey = options.getNodeKey || defaultGetNodeKey;\n    var onBeforeNodeAdded = options.onBeforeNodeAdded || noop;\n    var onNodeAdded = options.onNodeAdded || noop;\n    var onBeforeElUpdated = options.onBeforeElUpdated || options.onBeforeMorphEl || noop;\n    var onElUpdated = options.onElUpdated || noop;\n    var onBeforeNodeDiscarded = options.onBeforeNodeDiscarded || noop;\n    var onNodeDiscarded = options.onNodeDiscarded || noop;\n    var onBeforeElChildrenUpdated = options.onBeforeElChildrenUpdated || options.onBeforeMorphElChildren || noop;\n    var childrenOnly = options.childrenOnly === true;\n    var movedEls = [];\n\n    function removeNodeHelper(node, nestedInSavedEl) {\n        var id = getNodeKey(node);\n        // If the node has an ID then save it off since we will want\n        // to reuse it in case the target DOM tree has a DOM element\n        // with the same ID\n        if (id) {\n            savedEls[id] = node;\n        } else if (!nestedInSavedEl) {\n            // If we are not nested in a saved element then we know that this node has been\n            // completely discarded and will not exist in the final DOM.\n            onNodeDiscarded(node);\n        }\n\n        if (node.nodeType === ELEMENT_NODE) {\n            var curChild = node.firstChild;\n            while (curChild) {\n                removeNodeHelper(curChild, nestedInSavedEl || id);\n                curChild = curChild.nextSibling;\n            }\n        }\n    }\n\n    function walkDiscardedChildNodes(node) {\n        if (node.nodeType === ELEMENT_NODE) {\n            var curChild = node.firstChild;\n            while (curChild) {\n\n\n                if (!getNodeKey(curChild)) {\n                    // We only want to handle nodes that don't have an ID to avoid double\n                    // walking the same saved element.\n\n                    onNodeDiscarded(curChild);\n\n                    // Walk recursively\n                    walkDiscardedChildNodes(curChild);\n                }\n\n                curChild = curChild.nextSibling;\n            }\n        }\n    }\n\n    function removeNode(node, parentNode, alreadyVisited) {\n        if (onBeforeNodeDiscarded(node) === false) {\n            return;\n        }\n\n        parentNode.removeChild(node);\n        if (alreadyVisited) {\n            if (!getNodeKey(node)) {\n                onNodeDiscarded(node);\n                walkDiscardedChildNodes(node);\n            }\n        } else {\n            removeNodeHelper(node);\n        }\n    }\n\n    function morphEl(fromEl, toEl, alreadyVisited, childrenOnly) {\n        var toElKey = getNodeKey(toEl);\n        if (toElKey) {\n            // If an element with an ID is being morphed then it is will be in the final\n            // DOM so clear it out of the saved elements collection\n            delete savedEls[toElKey];\n        }\n\n        if (!childrenOnly) {\n            if (onBeforeElUpdated(fromEl, toEl) === false) {\n                return;\n            }\n\n            morphAttrs(fromEl, toEl);\n            onElUpdated(fromEl);\n\n            if (onBeforeElChildrenUpdated(fromEl, toEl) === false) {\n                return;\n            }\n        }\n\n        if (fromEl.nodeName !== 'TEXTAREA') {\n            var curToNodeChild = toEl.firstChild;\n            var curFromNodeChild = fromEl.firstChild;\n            var curToNodeId;\n\n            var fromNextSibling;\n            var toNextSibling;\n            var savedEl;\n            var unmatchedEl;\n\n            outer: while (curToNodeChild) {\n                toNextSibling = curToNodeChild.nextSibling;\n                curToNodeId = getNodeKey(curToNodeChild);\n\n                while (curFromNodeChild) {\n                    var curFromNodeId = getNodeKey(curFromNodeChild);\n                    fromNextSibling = curFromNodeChild.nextSibling;\n\n                    if (!alreadyVisited) {\n                        if (curFromNodeId && (unmatchedEl = unmatchedEls[curFromNodeId])) {\n                            unmatchedEl.parentNode.replaceChild(curFromNodeChild, unmatchedEl);\n                            morphEl(curFromNodeChild, unmatchedEl, alreadyVisited);\n                            curFromNodeChild = fromNextSibling;\n                            continue;\n                        }\n                    }\n\n                    var curFromNodeType = curFromNodeChild.nodeType;\n\n                    if (curFromNodeType === curToNodeChild.nodeType) {\n                        var isCompatible = false;\n\n                        // Both nodes being compared are Element nodes\n                        if (curFromNodeType === ELEMENT_NODE) {\n                            if (compareNodeNames(curFromNodeChild, curToNodeChild)) {\n                                // We have compatible DOM elements\n                                if (curFromNodeId || curToNodeId) {\n                                    // If either DOM element has an ID then we\n                                    // handle those differently since we want to\n                                    // match up by ID\n                                    if (curToNodeId === curFromNodeId) {\n                                        isCompatible = true;\n                                    }\n                                } else {\n                                    isCompatible = true;\n                                }\n                            }\n\n                            if (isCompatible) {\n                                // We found compatible DOM elements so transform\n                                // the current \"from\" node to match the current\n                                // target DOM node.\n                                morphEl(curFromNodeChild, curToNodeChild, alreadyVisited);\n                            }\n                        // Both nodes being compared are Text or Comment nodes\n                    } else if (curFromNodeType === TEXT_NODE || curFromNodeType == COMMENT_NODE) {\n                            isCompatible = true;\n                            // Simply update nodeValue on the original node to\n                            // change the text value\n                            curFromNodeChild.nodeValue = curToNodeChild.nodeValue;\n                        }\n\n                        if (isCompatible) {\n                            curToNodeChild = toNextSibling;\n                            curFromNodeChild = fromNextSibling;\n                            continue outer;\n                        }\n                    }\n\n                    // No compatible match so remove the old node from the DOM\n                    // and continue trying to find a match in the original DOM\n                    removeNode(curFromNodeChild, fromEl, alreadyVisited);\n                    curFromNodeChild = fromNextSibling;\n                }\n\n                if (curToNodeId) {\n                    if ((savedEl = savedEls[curToNodeId])) {\n                        if (compareNodeNames(savedEl, curToNodeChild)) {\n                            morphEl(savedEl, curToNodeChild, true);\n                            // We want to append the saved element instead\n                            curToNodeChild = savedEl;\n                        } else {\n                            delete savedEls[curToNodeId];\n                            onNodeDiscarded(savedEl);\n                        }\n                    } else {\n                        // The current DOM element in the target tree has an ID\n                        // but we did not find a match in any of the\n                        // corresponding siblings. We just put the target\n                        // element in the old DOM tree but if we later find an\n                        // element in the old DOM tree that has a matching ID\n                        // then we will replace the target element with the\n                        // corresponding old element and morph the old element\n                        unmatchedEls[curToNodeId] = curToNodeChild;\n                    }\n                }\n\n                // If we got this far then we did not find a candidate match for\n                // our \"to node\" and we exhausted all of the children \"from\"\n                // nodes. Therefore, we will just append the current \"to node\"\n                // to the end\n                if (onBeforeNodeAdded(curToNodeChild) !== false) {\n                    fromEl.appendChild(curToNodeChild);\n                    onNodeAdded(curToNodeChild);\n                }\n\n                if (curToNodeChild.nodeType === ELEMENT_NODE &&\n                    (curToNodeId || curToNodeChild.firstChild)) {\n                    // The element that was just added to the original DOM may\n                    // have some nested elements with a key/ID that needs to be\n                    // matched up with other elements. We'll add the element to\n                    // a list so that we can later process the nested elements\n                    // if there are any unmatched keyed elements that were\n                    // discarded\n                    movedEls.push(curToNodeChild);\n                }\n\n                curToNodeChild = toNextSibling;\n                curFromNodeChild = fromNextSibling;\n            }\n\n            // We have processed all of the \"to nodes\". If curFromNodeChild is\n            // non-null then we still have some from nodes left over that need\n            // to be removed\n            while (curFromNodeChild) {\n                fromNextSibling = curFromNodeChild.nextSibling;\n                removeNode(curFromNodeChild, fromEl, alreadyVisited);\n                curFromNodeChild = fromNextSibling;\n            }\n        }\n\n        var specialElHandler = specialElHandlers[fromEl.nodeName];\n        if (specialElHandler) {\n            specialElHandler(fromEl, toEl);\n        }\n    } // END: morphEl(...)\n\n    var morphedNode = fromNode;\n    var morphedNodeType = morphedNode.nodeType;\n    var toNodeType = toNode.nodeType;\n\n    if (!childrenOnly) {\n        // Handle the case where we are given two DOM nodes that are not\n        // compatible (e.g. <div> --> <span> or <div> --> TEXT)\n        if (morphedNodeType === ELEMENT_NODE) {\n            if (toNodeType === ELEMENT_NODE) {\n                if (!compareNodeNames(fromNode, toNode)) {\n                    onNodeDiscarded(fromNode);\n                    morphedNode = moveChildren(fromNode, createElementNS(toNode.nodeName, toNode.namespaceURI));\n                }\n            } else {\n                // Going from an element node to a text node\n                morphedNode = toNode;\n            }\n        } else if (morphedNodeType === TEXT_NODE || morphedNodeType === COMMENT_NODE) { // Text or comment node\n            if (toNodeType === morphedNodeType) {\n                morphedNode.nodeValue = toNode.nodeValue;\n                return morphedNode;\n            } else {\n                // Text node to something else\n                morphedNode = toNode;\n            }\n        }\n    }\n\n    if (morphedNode === toNode) {\n        // The \"to node\" was not compatible with the \"from node\" so we had to\n        // toss out the \"from node\" and use the \"to node\"\n        onNodeDiscarded(fromNode);\n    } else {\n        morphEl(morphedNode, toNode, false, childrenOnly);\n\n        /**\n         * What we will do here is walk the tree for the DOM element that was\n         * moved from the target DOM tree to the original DOM tree and we will\n         * look for keyed elements that could be matched to keyed elements that\n         * were earlier discarded.  If we find a match then we will move the\n         * saved element into the final DOM tree.\n         */\n        var handleMovedEl = function(el) {\n            var curChild = el.firstChild;\n            while (curChild) {\n                var nextSibling = curChild.nextSibling;\n\n                var key = getNodeKey(curChild);\n                if (key) {\n                    var savedEl = savedEls[key];\n                    if (savedEl && compareNodeNames(curChild, savedEl)) {\n                        curChild.parentNode.replaceChild(savedEl, curChild);\n                        // true: already visited the saved el tree\n                        morphEl(savedEl, curChild, true);\n                        curChild = nextSibling;\n                        if (empty(savedEls)) {\n                            return false;\n                        }\n                        continue;\n                    }\n                }\n\n                if (curChild.nodeType === ELEMENT_NODE) {\n                    handleMovedEl(curChild);\n                }\n\n                curChild = nextSibling;\n            }\n        };\n\n        // The loop below is used to possibly match up any discarded\n        // elements in the original DOM tree with elemenets from the\n        // target tree that were moved over without visiting their\n        // children\n        if (!empty(savedEls)) {\n            handleMovedElsLoop:\n            while (movedEls.length) {\n                var movedElsTemp = movedEls;\n                movedEls = [];\n                for (var i=0; i<movedElsTemp.length; i++) {\n                    if (handleMovedEl(movedElsTemp[i]) === false) {\n                        // There are no more unmatched elements so completely end\n                        // the loop\n                        break handleMovedElsLoop;\n                    }\n                }\n            }\n        }\n\n        // Fire the \"onNodeDiscarded\" event for any saved elements\n        // that never found a new home in the morphed DOM\n        for (var savedElId in savedEls) {\n            if (savedEls.hasOwnProperty(savedElId)) {\n                var savedEl = savedEls[savedElId];\n                onNodeDiscarded(savedEl);\n                walkDiscardedChildNodes(savedEl);\n            }\n        }\n    }\n\n    if (!childrenOnly && morphedNode !== fromNode && fromNode.parentNode) {\n        // If we had to swap out the from node with a new node because the old\n        // node was not compatible with the target node then we need to\n        // replace the old DOM node in the original DOM tree. This is only\n        // possible if the original DOM node was part of a DOM tree which\n        // we know is the case if it has a parent node.\n        fromNode.parentNode.replaceChild(morphedNode, fromNode);\n    }\n\n    return morphedNode;\n}\n\nmodule.exports = morphdom;\n","'use strict';\nmodule.exports = Number.isNaN || function (x) {\n\treturn x !== x;\n};\n","/**\n * Generate a fingerprint for a file which will be used the store the endpoint\n *\n * @param {File} file\n * @return {String}\n */\n\"use strict\";\n\nmodule.exports = fingerprint;\n\nfunction fingerprint(file) {\n  return [\"tus\", file.name, file.type, file.size, file.lastModified].join(\"-\");\n}","var topLevel = typeof global !== 'undefined' ? global :\n    typeof window !== 'undefined' ? window : {}\nvar minDoc = require('min-document');\n\nif (typeof document !== 'undefined') {\n    module.exports = document;\n} else {\n    var doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'];\n\n    if (!doccy) {\n        doccy = topLevel['__GLOBAL_DOCUMENT_CACHE@4'] = minDoc;\n    }\n\n    module.exports = doccy;\n}\n","var attrToProp = require('hyperscript-attribute-to-property')\n\nvar VAR = 0, TEXT = 1, OPEN = 2, CLOSE = 3, ATTR = 4\nvar ATTR_KEY = 5, ATTR_KEY_W = 6\nvar ATTR_VALUE_W = 7, ATTR_VALUE = 8\nvar ATTR_VALUE_SQ = 9, ATTR_VALUE_DQ = 10\nvar ATTR_EQ = 11, ATTR_BREAK = 12\n\nmodule.exports = function (h, opts) {\n  h = attrToProp(h)\n  if (!opts) opts = {}\n  var concat = opts.concat || function (a, b) {\n    return String(a) + String(b)\n  }\n\n  return function (strings) {\n    var state = TEXT, reg = ''\n    var arglen = arguments.length\n    var parts = []\n\n    for (var i = 0; i < strings.length; i++) {\n      if (i < arglen - 1) {\n        var arg = arguments[i+1]\n        var p = parse(strings[i])\n        var xstate = state\n        if (xstate === ATTR_VALUE_DQ) xstate = ATTR_VALUE\n        if (xstate === ATTR_VALUE_SQ) xstate = ATTR_VALUE\n        if (xstate === ATTR_VALUE_W) xstate = ATTR_VALUE\n        if (xstate === ATTR) xstate = ATTR_KEY\n        p.push([ VAR, xstate, arg ])\n        parts.push.apply(parts, p)\n      } else parts.push.apply(parts, parse(strings[i]))\n    }\n\n    var tree = [null,{},[]]\n    var stack = [[tree,-1]]\n    for (var i = 0; i < parts.length; i++) {\n      var cur = stack[stack.length-1][0]\n      var p = parts[i], s = p[0]\n      if (s === OPEN && /^\\//.test(p[1])) {\n        var ix = stack[stack.length-1][1]\n        if (stack.length > 1) {\n          stack.pop()\n          stack[stack.length-1][0][2][ix] = h(\n            cur[0], cur[1], cur[2].length ? cur[2] : undefined\n          )\n        }\n      } else if (s === OPEN) {\n        var c = [p[1],{},[]]\n        cur[2].push(c)\n        stack.push([c,cur[2].length-1])\n      } else if (s === ATTR_KEY || (s === VAR && p[1] === ATTR_KEY)) {\n        var key = ''\n        var copyKey\n        for (; i < parts.length; i++) {\n          if (parts[i][0] === ATTR_KEY) {\n            key = concat(key, parts[i][1])\n          } else if (parts[i][0] === VAR && parts[i][1] === ATTR_KEY) {\n            if (typeof parts[i][2] === 'object' && !key) {\n              for (copyKey in parts[i][2]) {\n                if (parts[i][2].hasOwnProperty(copyKey) && !cur[1][copyKey]) {\n                  cur[1][copyKey] = parts[i][2][copyKey]\n                }\n              }\n            } else {\n              key = concat(key, parts[i][2])\n            }\n          } else break\n        }\n        if (parts[i][0] === ATTR_EQ) i++\n        var j = i\n        for (; i < parts.length; i++) {\n          if (parts[i][0] === ATTR_VALUE || parts[i][0] === ATTR_KEY) {\n            if (!cur[1][key]) cur[1][key] = strfn(parts[i][1])\n            else cur[1][key] = concat(cur[1][key], parts[i][1])\n          } else if (parts[i][0] === VAR\n          && (parts[i][1] === ATTR_VALUE || parts[i][1] === ATTR_KEY)) {\n            if (!cur[1][key]) cur[1][key] = strfn(parts[i][2])\n            else cur[1][key] = concat(cur[1][key], parts[i][2])\n          } else {\n            if (key.length && !cur[1][key] && i === j\n            && (parts[i][0] === CLOSE || parts[i][0] === ATTR_BREAK)) {\n              // https://html.spec.whatwg.org/multipage/infrastructure.html#boolean-attributes\n              // empty string is falsy, not well behaved value in browser\n              cur[1][key] = key.toLowerCase()\n            }\n            break\n          }\n        }\n      } else if (s === ATTR_KEY) {\n        cur[1][p[1]] = true\n      } else if (s === VAR && p[1] === ATTR_KEY) {\n        cur[1][p[2]] = true\n      } else if (s === CLOSE) {\n        if (selfClosing(cur[0]) && stack.length) {\n          var ix = stack[stack.length-1][1]\n          stack.pop()\n          stack[stack.length-1][0][2][ix] = h(\n            cur[0], cur[1], cur[2].length ? cur[2] : undefined\n          )\n        }\n      } else if (s === VAR && p[1] === TEXT) {\n        if (p[2] === undefined || p[2] === null) p[2] = ''\n        else if (!p[2]) p[2] = concat('', p[2])\n        if (Array.isArray(p[2][0])) {\n          cur[2].push.apply(cur[2], p[2])\n        } else {\n          cur[2].push(p[2])\n        }\n      } else if (s === TEXT) {\n        cur[2].push(p[1])\n      } else if (s === ATTR_EQ || s === ATTR_BREAK) {\n        // no-op\n      } else {\n        throw new Error('unhandled: ' + s)\n      }\n    }\n\n    if (tree[2].length > 1 && /^\\s*$/.test(tree[2][0])) {\n      tree[2].shift()\n    }\n\n    if (tree[2].length > 2\n    || (tree[2].length === 2 && /\\S/.test(tree[2][1]))) {\n      throw new Error(\n        'multiple root elements must be wrapped in an enclosing tag'\n      )\n    }\n    if (Array.isArray(tree[2][0]) && typeof tree[2][0][0] === 'string'\n    && Array.isArray(tree[2][0][2])) {\n      tree[2][0] = h(tree[2][0][0], tree[2][0][1], tree[2][0][2])\n    }\n    return tree[2][0]\n\n    function parse (str) {\n      var res = []\n      if (state === ATTR_VALUE_W) state = ATTR\n      for (var i = 0; i < str.length; i++) {\n        var c = str.charAt(i)\n        if (state === TEXT && c === '<') {\n          if (reg.length) res.push([TEXT, reg])\n          reg = ''\n          state = OPEN\n        } else if (c === '>' && !quot(state)) {\n          if (state === OPEN) {\n            res.push([OPEN,reg])\n          } else if (state === ATTR_KEY) {\n            res.push([ATTR_KEY,reg])\n          } else if (state === ATTR_VALUE && reg.length) {\n            res.push([ATTR_VALUE,reg])\n          }\n          res.push([CLOSE])\n          reg = ''\n          state = TEXT\n        } else if (state === TEXT) {\n          reg += c\n        } else if (state === OPEN && /\\s/.test(c)) {\n          res.push([OPEN, reg])\n          reg = ''\n          state = ATTR\n        } else if (state === OPEN) {\n          reg += c\n        } else if (state === ATTR && /[\\w-]/.test(c)) {\n          state = ATTR_KEY\n          reg = c\n        } else if (state === ATTR && /\\s/.test(c)) {\n          if (reg.length) res.push([ATTR_KEY,reg])\n          res.push([ATTR_BREAK])\n        } else if (state === ATTR_KEY && /\\s/.test(c)) {\n          res.push([ATTR_KEY,reg])\n          reg = ''\n          state = ATTR_KEY_W\n        } else if (state === ATTR_KEY && c === '=') {\n          res.push([ATTR_KEY,reg],[ATTR_EQ])\n          reg = ''\n          state = ATTR_VALUE_W\n        } else if (state === ATTR_KEY) {\n          reg += c\n        } else if ((state === ATTR_KEY_W || state === ATTR) && c === '=') {\n          res.push([ATTR_EQ])\n          state = ATTR_VALUE_W\n        } else if ((state === ATTR_KEY_W || state === ATTR) && !/\\s/.test(c)) {\n          res.push([ATTR_BREAK])\n          if (/[\\w-]/.test(c)) {\n            reg += c\n            state = ATTR_KEY\n          } else state = ATTR\n        } else if (state === ATTR_VALUE_W && c === '\"') {\n          state = ATTR_VALUE_DQ\n        } else if (state === ATTR_VALUE_W && c === \"'\") {\n          state = ATTR_VALUE_SQ\n        } else if (state === ATTR_VALUE_DQ && c === '\"') {\n          res.push([ATTR_VALUE,reg],[ATTR_BREAK])\n          reg = ''\n          state = ATTR\n        } else if (state === ATTR_VALUE_SQ && c === \"'\") {\n          res.push([ATTR_VALUE,reg],[ATTR_BREAK])\n          reg = ''\n          state = ATTR\n        } else if (state === ATTR_VALUE_W && !/\\s/.test(c)) {\n          state = ATTR_VALUE\n          i--\n        } else if (state === ATTR_VALUE && /\\s/.test(c)) {\n          res.push([ATTR_VALUE,reg],[ATTR_BREAK])\n          reg = ''\n          state = ATTR\n        } else if (state === ATTR_VALUE || state === ATTR_VALUE_SQ\n        || state === ATTR_VALUE_DQ) {\n          reg += c\n        }\n      }\n      if (state === TEXT && reg.length) {\n        res.push([TEXT,reg])\n        reg = ''\n      } else if (state === ATTR_VALUE && reg.length) {\n        res.push([ATTR_VALUE,reg])\n        reg = ''\n      } else if (state === ATTR_VALUE_DQ && reg.length) {\n        res.push([ATTR_VALUE,reg])\n        reg = ''\n      } else if (state === ATTR_VALUE_SQ && reg.length) {\n        res.push([ATTR_VALUE,reg])\n        reg = ''\n      } else if (state === ATTR_KEY) {\n        res.push([ATTR_KEY,reg])\n        reg = ''\n      }\n      return res\n    }\n  }\n\n  function strfn (x) {\n    if (typeof x === 'function') return x\n    else if (typeof x === 'string') return x\n    else if (x && typeof x === 'object') return x\n    else return concat('', x)\n  }\n}\n\nfunction quot (state) {\n  return state === ATTR_VALUE_SQ || state === ATTR_VALUE_DQ\n}\n\nvar hasOwn = Object.prototype.hasOwnProperty\nfunction has (obj, key) { return hasOwn.call(obj, key) }\n\nvar closeRE = RegExp('^(' + [\n  'area', 'base', 'basefont', 'bgsound', 'br', 'col', 'command', 'embed',\n  'frame', 'hr', 'img', 'input', 'isindex', 'keygen', 'link', 'meta', 'param',\n  'source', 'track', 'wbr',\n  // SVG TAGS\n  'animate', 'animateTransform', 'circle', 'cursor', 'desc', 'ellipse',\n  'feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite',\n  'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap',\n  'feDistantLight', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR',\n  'feGaussianBlur', 'feImage', 'feMergeNode', 'feMorphology',\n  'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile',\n  'feTurbulence', 'font-face-format', 'font-face-name', 'font-face-uri',\n  'glyph', 'glyphRef', 'hkern', 'image', 'line', 'missing-glyph', 'mpath',\n  'path', 'polygon', 'polyline', 'rect', 'set', 'stop', 'tref', 'use', 'view',\n  'vkern'\n].join('|') + ')(?:[\\.#][a-zA-Z0-9\\u007F-\\uFFFF_:-]+)*$')\nfunction selfClosing (tag) { return closeRE.test(tag) }\n","/* global MutationObserver */\nvar document = require('global/document')\nvar window = require('global/window')\nvar watch = Object.create(null)\nvar KEY_ID = 'onloadid' + (new Date() % 9e6).toString(36)\nvar KEY_ATTR = 'data-' + KEY_ID\nvar INDEX = 0\n\nif (window && window.MutationObserver) {\n  var observer = new MutationObserver(function (mutations) {\n    if (Object.keys(watch).length < 1) return\n    for (var i = 0; i < mutations.length; i++) {\n      if (mutations[i].attributeName === KEY_ATTR) {\n        eachAttr(mutations[i], turnon, turnoff)\n        continue\n      }\n      eachMutation(mutations[i].removedNodes, turnoff)\n      eachMutation(mutations[i].addedNodes, turnon)\n    }\n  })\n  observer.observe(document.body, {\n    childList: true,\n    subtree: true,\n    attributes: true,\n    attributeOldValue: true,\n    attributeFilter: [KEY_ATTR]\n  })\n}\n\nmodule.exports = function onload (el, on, off, caller) {\n  on = on || function () {}\n  off = off || function () {}\n  el.setAttribute(KEY_ATTR, 'o' + INDEX)\n  watch['o' + INDEX] = [on, off, 0, caller || onload.caller]\n  INDEX += 1\n  return el\n}\n\nfunction turnon (index, el) {\n  if (watch[index][0] && watch[index][2] === 0) {\n    watch[index][0](el)\n    watch[index][2] = 1\n  }\n}\n\nfunction turnoff (index, el) {\n  if (watch[index][1] && watch[index][2] === 1) {\n    watch[index][1](el)\n    watch[index][2] = 0\n  }\n}\n\nfunction eachAttr (mutation, on, off) {\n  var newValue = mutation.target.getAttribute(KEY_ATTR)\n  if (sameOrigin(mutation.oldValue, newValue)) {\n    watch[newValue] = watch[mutation.oldValue]\n    return\n  }\n  if (watch[mutation.oldValue]) {\n    off(mutation.oldValue, mutation.target)\n  }\n  if (watch[newValue]) {\n    on(newValue, mutation.target)\n  }\n}\n\nfunction sameOrigin (oldValue, newValue) {\n  if (!oldValue || !newValue) return false\n  return watch[oldValue][3] === watch[newValue][3]\n}\n\nfunction eachMutation (nodes, fn) {\n  var keys = Object.keys(watch)\n  for (var i = 0; i < nodes.length; i++) {\n    if (nodes[i] && nodes[i].getAttribute && nodes[i].getAttribute(KEY_ATTR)) {\n      var onloadid = nodes[i].getAttribute(KEY_ATTR)\n      keys.forEach(function (k) {\n        if (onloadid === k) {\n          fn(k, nodes[i])\n        }\n      })\n    }\n    if (nodes[i].childNodes.length > 0) {\n      eachMutation(nodes[i].childNodes, fn)\n    }\n  }\n}\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) {/**/}\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone,\n\t\ttarget = arguments[0],\n\t\ti = 1,\n\t\tlength = arguments.length,\n\t\tdeep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t} else if ((typeof target !== 'object' && typeof target !== 'function') || target == null) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n\n","module.exports = attributeToProperty\n\nvar transform = {\n  'class': 'className',\n  'for': 'htmlFor',\n  'http-equiv': 'httpEquiv'\n}\n\nfunction attributeToProperty (h) {\n  return function (tagName, attrs, children) {\n    for (var attr in attrs) {\n      if (attr in transform) {\n        attrs[transform[attr]] = attrs[attr]\n        delete attrs[attr]\n      }\n    }\n    return h(tagName, attrs, children)\n  }\n}\n","if (typeof window !== \"undefined\") {\n    module.exports = window;\n} else if (typeof global !== \"undefined\") {\n    module.exports = global;\n} else if (typeof self !== \"undefined\"){\n    module.exports = self;\n} else {\n    module.exports = {};\n}\n"]}